{
  "updatedAt": "2025-09-18T14:37:02.371Z",
  "createdAt": "2025-09-06T07:48:09.108Z",
  "id": "iEnosGi2fBAjpBwE",
  "name": "movie new",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "hour": 10
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk",
          "mode": "list",
          "cachedResultName": "movie",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk"
        },
        "event": "fileCreated",
        "options": {}
      },
      "id": "be2eb2bb-8069-4240-a5ea-ffbe535fdf5d",
      "name": "Google Drive Trigger",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        -64,
        -432
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "id": "7a635aa5-3bed-4228-a3d0-835e659cfaba",
      "name": "Download Video",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        160,
        -432
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "command": "=# æª¢æŸ¥ FFmpeg æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±å®‰è£\nif [ ! -f \"/root/.n8n/tools/ffmpeg\" ]; then\n  mkdir -p /root/.n8n/tools && wget -qO- https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-amd64-static.tar.xz | tar -xJ --strip-components=1 -C /root/.n8n/tools && chmod +x /root/.n8n/tools/ffmpeg\nfi\n\n# åŸ·è¡ŒéŸ³æª”è½‰æ›\n/root/.n8n/tools/ffmpeg -i \"/tmp/video.mp4\" -vn -acodec libmp3lame -ab 64k \"/tmp/audio.mp3\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1280,
        -432
      ],
      "id": "66fcb33a-6735-4bed-8a52-25c23d96af59",
      "name": "è½‰éŸ³æª”"
    },
    {
      "parameters": {
        "command": "=# å®‰è£å­—é«”å¥—ä»¶\napk add --no-cache fontconfig ttf-dejavu font-noto-cjk\n\necho '{{ $json.data }}' > /tmp/subtitles.srt\n\n/root/.n8n/tools/ffmpeg -hide_banner -loglevel error -i \"/tmp/video.mp4\" -vf \"subtitles=/tmp/subtitles.srt:force_style='FontName=Noto Sans CJK TC,FontSize=24'\" -c:a copy \"/tmp/video_with_subtitles.mp4\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1952,
        -336
      ],
      "id": "7d37e90d-e97b-44a6-9429-d0991a1e6fed",
      "name": "ç‡’å›å½±ç‰‡"
    },
    {
      "parameters": {
        "command": "rm -f /tmp/video.mp4 /tmp/audio.mp3 /tmp/subtitles.srt /tmp/video_with_subtitles.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2624,
        -336
      ],
      "id": "ad61fde9-a6b6-4200-b9fd-4d7067904ca3",
      "name": "æ¸…é™¤1"
    },
    {
      "parameters": {
        "fileSelector": "=/tmp/video_with_subtitles.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2176,
        -336
      ],
      "id": "cde6b15d-90ab-4d43-b14f-77425182b537",
      "name": "è½‰å›æª”æ¡ˆ"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "binaryData": true,
        "name": "={{ $('Google Drive Trigger').first().json.name.replace('.mp4', '_subtitles.mp4') }}",
        "parents": [
          "1QAs4ucGqfc3cMyGcveGP31qPDItVBpF3"
        ],
        "options": {}
      },
      "id": "da84d15e-1556-4037-9fec-3aaa8c852c4f",
      "name": "ä¸Šå‚³é›²ç«¯",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        2400,
        -336
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "/tmp/video.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1056,
        -432
      ],
      "id": "3e59fa30-7da1-42b5-ad34-56f92ca7183e",
      "name": "å¯«é€²n8n"
    },
    {
      "parameters": {
        "fileSelector": "=/tmp/audio.mp3",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1504,
        -432
      ],
      "id": "17219757-8dba-4150-ab32-5e6d30a84f02",
      "name": "è®€å–è©²n8n å½±ç‰‡æª”"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/audio/transcriptions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer [REMOVED]"
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            },
            {
              "name": "model",
              "value": "whisper-1"
            },
            {
              "name": "response_format",
              "value": "srt"
            },
            {
              "name": "language",
              "value": "zh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1728,
        -432
      ],
      "id": "8998d3eb-60b6-4936-9aad-8506a828f9af",
      "name": "AI æ“·å–éŸ³æª”"
    },
    {
      "parameters": {
        "operation": "createFromText",
        "content": "={{ $json.data }}",
        "name": "={{ $today.format('yyyy-MM-dd')}}_{{ $('è®€å–è©²n8n å½±ç‰‡æª”').item.json.fileName }}",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1jjVHQl1ev95zFMYSm_stqbrWJ7_eN6Zc",
          "mode": "list",
          "cachedResultName": "éŸ³æª”è½‰æ–‡å­—",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1jjVHQl1ev95zFMYSm_stqbrWJ7_eN6Zc"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1952,
        -528
      ],
      "id": "a833132d-cc8b-43e8-9fe1-b5f3be74be90",
      "name": "å°‡éŸ³æª”æ–‡å­—æª”å­˜èµ·ä¾†",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "move",
        "fileId": {
          "__rl": true,
          "value": "={{ $('Google Drive Trigger').first().json.id }}",
          "mode": "id"
        },
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1e7IrHoXQDG3Z7jIZZ8fcN7VPcYgYWbYf",
          "mode": "list",
          "cachedResultName": "è™•ç†å®Œçš„å½±ç‰‡",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1e7IrHoXQDG3Z7jIZZ8fcN7VPcYgYWbYf"
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        2848,
        -336
      ],
      "id": "31222b85-7b5c-478c-8417-509800d21641",
      "name": "ç§»å‹•åˆ°å·²è™•ç†å½±ç‰‡",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "command": "=# å°‡å¤§æª”æ¡ˆå¯«å…¥ç£ç¢Ÿ\necho \"{{ $binary.data }}\" | base64 -d > /tmp/original_video.mp4\n\n# å£“ç¸®å½±ç‰‡\n/root/.n8n/tools/ffmpeg -i \"/tmp/original_video.mp4\" -vcodec libx264 -crf 28 -preset fast -vf \"scale=720:-2\" \"/tmp/video.mp4\"\n\n# æ¸…ç†åŸæª”æ¡ˆ\nrm -f /tmp/original_video.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        608,
        -512
      ],
      "id": "9afe68c9-7d95-41aa-99e9-ad10f90544e4",
      "name": "å£“ç¸®"
    },
    {
      "parameters": {
        "fileSelector": "=/tmp/video.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        832,
        -512
      ],
      "id": "cf3a65cb-d8b2-4995-b9c6-f0783bc2b640",
      "name": "å£“ç¸®å¾Œè¦è½‰æª”"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "44df57cb-0ed9-4165-92db-44fa7e737c91",
              "leftValue": "={{ $json.size.toNumber() }}",
              "rightValue": 50000000,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        384,
        -432
      ],
      "id": "9cce0a1a-be92-4c2e-a190-4e1ed7f5b0e2",
      "name": "If  å¦‚æœå¤§æ–¼50 MB"
    },
    {
      "parameters": {
        "content": "å†æŠŠè‡ªå·±çš„ GPT API \nè²¼ä¸Šå»\nä½ç½®åœ¨ \nBearer \"API....\"",
        "height": 432
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2704,
        1328
      ],
      "typeVersion": 1,
      "id": "59b77cab-e0e3-4dae-9b89-4e06ee2880fc",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "command": "rm -f /tmp/video.mp4 /tmp/audio.mp3 /tmp/subtitles.srt /tmp/video_with_subtitles.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        3664,
        1696
      ],
      "id": "a9228810-0436-4d7c-81b9-1c746a44f685",
      "name": "æ¸…é™¤æš«å­˜"
    },
    {
      "parameters": {
        "content": "é€™é‚Šä¸Šå‚³ä¹‹å¾Œ\n\nå°±å¯ä»¥æ¥ å„å¤§ç¤¾ç¾¤å¹³å°ç™¼å¸ƒ\n(FB IG threads ç­‰)",
        "height": 336,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3376,
        1520
      ],
      "typeVersion": 1,
      "id": "3f08f302-a7fa-4521-a740-f6ba571d326b",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "æ•´é«”è«‹æ›æˆè‡ªå·±çš„\nGoogle Drive \nGPT API\n\nå…¶ä»–å¹¾ä¹éƒ½ä¸ç”¨å‹•"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1312,
        1184
      ],
      "typeVersion": 1,
      "id": "6351541f-8ff4-467d-b7f5-23d3c6cd136c",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## é€™æ˜¯æˆ‘çš„ç¤¾ç¾¤ï¼š\n## [ZN AI æ¨‚åœ’](https://line.me/ti/g2/m9R6Fd9CF2SiMIA2wheULFoBZUtsoFV7ckW8MA?utm_source=invitation&utm_medium=link_copy&utm_campaign=default/)\næ­¡è¿é»æ“Š ZN AI æ¨‚åœ’\n\nä¸€èµ·åŠ å…¥åˆ†äº«è¨è«– n8n AI \n\nNick Changï½œnickleo051216@gmail.comï½œ\n\n0932-684-051\n\nå€‹äººç¶²ç«™ï¼š[ZN Studio](https://portaly.cc/zn.studio)\n\nThreadsï¼š ZN Studio\n[@nickai216](https://www.threads.com/@nickai216)\n\nLine ï¼š [å®¢æœ](https://lin.ee/Faz0doj)",
        "height": 640,
        "width": 288,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1280,
        752
      ],
      "typeVersion": 1,
      "id": "a061f3a5-10bd-4bb6-9947-3b7459ead19e",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "name": "={{ $today.format('yyyy-MM-dd')}}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk",
          "mode": "list",
          "cachedResultName": "movie",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1424,
        1504
      ],
      "id": "6c8bee63-c3d7-4945-a477-4982fa69f3e5",
      "name": "Upload file",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "movie",
        "options": {}
      },
      "id": "e38a52d9-f028-4c5c-bdb7-d2a0875bc6af",
      "name": "Line Webhook æ¥æ”¶",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        752,
        1408
      ],
      "webhookId": "[REMOVED]",
      "notes": "æ¥æ”¶ Line çš„å½±ç‰‡è¨Šæ¯\nå»ºè­°è¨­å®šï¼š /webhook/line-video"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "video-check",
              "leftValue": "={{ $json.body.events[0].message.type }}",
              "rightValue": "video",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        976,
        1520
      ],
      "id": "468d9b16-8d30-45b2-8739-fa106fef8496",
      "name": "æª¢æŸ¥æ˜¯å¦ç‚ºå½±ç‰‡è¨Šæ¯"
    },
    {
      "parameters": {
        "url": "=https://api-data.line.me/v2/bot/message/{{ $json.body.events[0].message.id }}/content",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer "
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1200,
        1504
      ],
      "id": "c7b487dd-c880-403f-9d3d-9b8fbc20e986",
      "name": "ä¸‹è¼‰ Line å½±ç‰‡",
      "notes": "éœ€è¦è¨­å®šä½ çš„ Line Channel Access Token"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.line.me/v2/bot/message/reply",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer "
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"replyToken\": \"{{ $json.body.events[0].replyToken }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"æ”¶åˆ°å½±ç‰‡ï¼æ­£åœ¨è™•ç†ä¸­...\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        976,
        1312
      ],
      "id": "de527db4-cbaf-498e-b7ae-d7e2f40bcd3b",
      "name": "å›è¦† Line è¨Šæ¯",
      "notes": "å‘ŠçŸ¥ç”¨æˆ¶å·²æ”¶åˆ°å½±ç‰‡ä¸¦é–‹å§‹è™•ç†"
    },
    {
      "parameters": {
        "content": "ğŸ“ è¨­å®šèªªæ˜ï¼š\n\n1. Line Channel Access Token\n   - åˆ° Line Developers Console å–å¾—\n   - è¨­å®šåœ¨ã€Œä¸‹è¼‰ Line å½±ç‰‡ã€å’Œã€Œå›è¦† Line è¨Šæ¯ã€ç¯€é»\n\n2. Webhook URL\n   - è¨­å®šç‚ºï¼šä½ çš„ n8n ç¶²å€/webhook/line-video\n   - åœ¨ Line Developers Console è¨­å®šæ­¤ç¶²å€\n\n3. Google Drive è³‡æ–™å¤¾ ID\n   - è¨­å®šç‚ºä½ è¦ç›£æ§çš„è³‡æ–™å¤¾\n",
        "height": 496,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        672,
        1072
      ],
      "typeVersion": 1,
      "id": "e301f8d0-f2b9-4150-be43-9660b023c41b",
      "name": "è¨­å®šèªªæ˜"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.line.me/v2/bot/message/push",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer "
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"to\": \"{{ $('Line Webhook æ¥æ”¶').item.json.body.events[0].source.userId }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"è©²æ¬¡å½±ç‰‡å·²è™•ç†å¥½ï¼Œè«‹è‡³  https://drive.google.com/file/d/{{ $('ä¸Šå‚³é›²ç«¯1').item.json.id }}/view?usp=drivesdk æŸ¥çœ‹\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4112,
        1696
      ],
      "id": "61b0b107-b320-4ada-a643-e3925c83a1db",
      "name": "å›è¦† Line è¨Šæ¯é€šçŸ¥",
      "notes": "å‘ŠçŸ¥ç”¨æˆ¶å·²æ”¶åˆ°å½±ç‰‡ä¸¦é–‹å§‹è™•ç†"
    },
    {
      "parameters": {
        "content": "ğŸ“ è¨­å®šèªªæ˜ï¼š\n\n1. Line Channel Access Token\n   - åˆ° Line Developers Console å–å¾—\n   - è¨­å®šåœ¨ã€Œä¸‹è¼‰ Line å½±ç‰‡ã€å’Œã€Œå›è¦† Line è¨Šæ¯ã€ç¯€é»\n\n\n",
        "height": 496,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4048,
        1360
      ],
      "typeVersion": 1,
      "id": "a8400e93-d990-4ff6-819b-aa246d6339f1",
      "name": "è¨­å®šèªªæ˜1"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "hour": 10
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk",
          "mode": "list",
          "cachedResultName": "movie",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk"
        },
        "event": "fileCreated",
        "options": {}
      },
      "id": "559d166e-0c83-4d86-8a7a-8ad6ef510fd8",
      "name": "Google Drive Trigger1",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        1424,
        1696
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "id": "f59d5847-f7aa-4b7d-87fe-8bf89632c50b",
      "name": "Download Video1",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        1648,
        1600
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "command": "=# æª¢æŸ¥ FFmpeg æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±å®‰è£\nif [ ! -f \"/root/.n8n/tools/ffmpeg\" ]; then\n  mkdir -p /root/.n8n/tools && wget -qO- https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-amd64-static.tar.xz | tar -xJ --strip-components=1 -C /root/.n8n/tools && chmod +x /root/.n8n/tools/ffmpeg\nfi\n\n# åŸ·è¡ŒéŸ³æª”è½‰æ›\n/root/.n8n/tools/ffmpeg -i \"/tmp/video.mp4\" -vn -acodec libmp3lame -ab 64k \"/tmp/audio.mp3\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2320,
        1600
      ],
      "id": "36344126-b4e5-4438-bd83-1191747a4153",
      "name": "è½‰éŸ³æª”1"
    },
    {
      "parameters": {
        "command": "=# å®‰è£å­—é«”å¥—ä»¶\napk add --no-cache fontconfig ttf-dejavu font-noto-cjk\n\necho '{{ $json.data }}' > /tmp/subtitles.srt\n\n/root/.n8n/tools/ffmpeg -hide_banner -loglevel error -i \"/tmp/video.mp4\" -vf \"subtitles=/tmp/subtitles.srt:force_style='FontName=Noto Sans CJK TC,FontSize=24'\" -c:a copy \"/tmp/video_with_subtitles.mp4\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2992,
        1696
      ],
      "id": "46bb0e32-330a-46bc-b772-c4fbc5b5e677",
      "name": "ç‡’å›å½±ç‰‡1"
    },
    {
      "parameters": {
        "fileSelector": "=/tmp/video_with_subtitles.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        3216,
        1696
      ],
      "id": "8393d997-1612-40ea-bed7-c31468070673",
      "name": "è½‰å›æª”æ¡ˆ1"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "binaryData": true,
        "name": "=Line UPload ({{ $('Download Video1').item.json.name }})",
        "parents": [
          "1QAs4ucGqfc3cMyGcveGP31qPDItVBpF3"
        ],
        "options": {}
      },
      "id": "814710da-8530-49d9-a0ba-7de60844b8e6",
      "name": "ä¸Šå‚³é›²ç«¯1",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        3440,
        1696
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "/tmp/video.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2096,
        1696
      ],
      "id": "fc79445c-b885-42bd-bdec-ddea96bbe3a1",
      "name": "å¯«é€²n8n1"
    },
    {
      "parameters": {
        "fileSelector": "=/tmp/audio.mp3",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2544,
        1600
      ],
      "id": "e91635dc-fd30-4963-8af8-6c2c61064807",
      "name": "è®€å–è©²n8n å½±ç‰‡æª”1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/audio/transcriptions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer "
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            },
            {
              "name": "model",
              "value": "whisper-1"
            },
            {
              "name": "response_format",
              "value": "srt"
            },
            {
              "name": "language",
              "value": "zh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2768,
        1600
      ],
      "id": "61fa3003-3a11-4de9-9ec9-de2f7c013bb2",
      "name": "AI æ“·å–éŸ³æª”1"
    },
    {
      "parameters": {
        "operation": "createFromText",
        "content": "={{ $json.data }}",
        "name": "={{ $today.format('yyyy-MM-dd')}}_{{ $('è®€å–è©²n8n å½±ç‰‡æª”1').item.json.fileName }}",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1jjVHQl1ev95zFMYSm_stqbrWJ7_eN6Zc",
          "mode": "list",
          "cachedResultName": "éŸ³æª”è½‰æ–‡å­—",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1jjVHQl1ev95zFMYSm_stqbrWJ7_eN6Zc"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        2992,
        1504
      ],
      "id": "0470ea4b-5bae-4a03-8471-533542eda3a1",
      "name": "å°‡éŸ³æª”æ–‡å­—æª”å­˜èµ·ä¾†1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "move",
        "fileId": {
          "__rl": true,
          "value": "={{ $('Upload file').item.json.id }}",
          "mode": "id"
        },
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1e7IrHoXQDG3Z7jIZZ8fcN7VPcYgYWbYf",
          "mode": "list",
          "cachedResultName": "è™•ç†å®Œçš„å½±ç‰‡",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1e7IrHoXQDG3Z7jIZZ8fcN7VPcYgYWbYf"
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        3888,
        1696
      ],
      "id": "dc46f053-3512-4042-a2f6-5705a5787bbc",
      "name": "ç§»å‹•åˆ°å·²è™•ç†å½±ç‰‡1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "command": "=# å°‡å¤§æª”æ¡ˆå¯«å…¥ç£ç¢Ÿ\necho \"{{ $binary.data }}\" | base64 -d > /tmp/original_video.mp4\n\n# å£“ç¸®å½±ç‰‡\n/root/.n8n/tools/ffmpeg -i \"/tmp/original_video.mp4\" -vcodec libx264 -crf 28 -preset fast -vf \"scale=720:-2\" \"/tmp/video.mp4\"\n\n# æ¸…ç†åŸæª”æ¡ˆ\nrm -f /tmp/original_video.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2096,
        1504
      ],
      "id": "755589f4-7933-4e6e-83e7-a0df14008780",
      "name": "å£“ç¸®1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "44df57cb-0ed9-4165-92db-44fa7e737c91",
              "leftValue": "={{ $json.size.toNumber() }}",
              "rightValue": 50000000,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1872,
        1600
      ],
      "id": "f6964084-04e0-4be1-be6f-d52fce1d6b4e",
      "name": "If  å¦‚æœå¤§æ–¼50 MB1"
    },
    {
      "parameters": {
        "content": "å†æŠŠè‡ªå·±çš„ GPT API \nè²¼ä¸Šå»\nä½ç½®åœ¨ \nBearer \"API....\"",
        "height": 432
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2976,
        3424
      ],
      "typeVersion": 1,
      "id": "8caf8478-b6ce-46ba-8575-e23ba6b10195",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "command": "rm -f /tmp/video.mp4 /tmp/audio.mp3 /tmp/subtitles.srt /tmp/video_with_subtitles.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        3936,
        3792
      ],
      "id": "5a70bcc5-694a-4f4b-b42d-64aa5c13c21e",
      "name": "æ¸…é™¤æš«å­˜1"
    },
    {
      "parameters": {
        "content": "é€™é‚Šä¸Šå‚³ä¹‹å¾Œ\n\nå°±å¯ä»¥æ¥ å„å¤§ç¤¾ç¾¤å¹³å°ç™¼å¸ƒ\n(FB IG threads ç­‰)",
        "height": 336,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3648,
        3616
      ],
      "typeVersion": 1,
      "id": "ebd69b42-1dcd-4bf1-a70e-674f7ed7ad59",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "æ•´é«”è«‹æ›æˆè‡ªå·±çš„\nGoogle Drive \nGPT API\n\nå…¶ä»–å¹¾ä¹éƒ½ä¸ç”¨å‹•"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1584,
        3280
      ],
      "typeVersion": 1,
      "id": "d9b9561a-ad3f-4ac7-bb78-7fa2026367fa",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "name": "={{ $today.format('yyyy-MM-dd')}}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk",
          "mode": "list",
          "cachedResultName": "movie",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1696,
        3712
      ],
      "id": "80254c22-8e84-4fbc-bcd5-44b5eda4aeb1",
      "name": "Upload file1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "movie",
        "options": {}
      },
      "id": "09c357a6-b27c-46d3-9d32-6ab196fe0f76",
      "name": "Line Webhook æ¥æ”¶1",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        368,
        3648
      ],
      "webhookId": "[REMOVED]",
      "notes": "æ¥æ”¶ Line çš„å½±ç‰‡è¨Šæ¯\nå»ºè­°è¨­å®šï¼š /webhook/line-video"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "video-check",
              "leftValue": "={{ $json.body.events[0].message.type }}",
              "rightValue": "video",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        656,
        3744
      ],
      "id": "a8e44c15-be87-410b-9ca4-750179293803",
      "name": "æª¢æŸ¥æ˜¯å¦ç‚ºå½±ç‰‡è¨Šæ¯1"
    },
    {
      "parameters": {
        "url": "=https://api-data.line.me/v2/bot/message/{{ $json.body.events[0].message.id }}/content",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer /uiyigGndco4VEBA/zGwpPEljrT+MkAfnEagwQc48AshgaZDoxLy4bg7qiiyGLDQKckz4ayPZ0QZ2AGCl0rxgv9wTqnqpQuhHcGVc/UatTRPfW3V6IU11LbFXTz7wNAaHVW/2/XzhwRzQLuNjkbiVAdB04t89/1O/w1cDnyilFU="
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1472,
        3488
      ],
      "id": "118b1388-86d9-411e-84b5-d8ebcfa5025f",
      "name": "ä¸‹è¼‰ Line å½±ç‰‡1",
      "notes": "éœ€è¦è¨­å®šä½ çš„ Line Channel Access Token"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.line.me/v2/bot/message/reply",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer /uiyigGndco4VEBA/zGwpPEljrT+MkAfnEagwQc48AshgaZDoxLy4bg7qiiyGLDQKckz4ayPZ0QZ2AGCl0rxgv9wTqnqpQuhHcGVc/UatTRPfW3V6IU11LbFXTz7wNAaHVW/2/XzhwRzQLuNjkbiVAdB04t89/1O/w1cDnyilFU="
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"replyToken\": \"{{ $json.body.events[0].replyToken }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"æ”¶åˆ°å½±ç‰‡ï¼æ­£åœ¨è™•ç†ä¸­...\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        928,
        3520
      ],
      "id": "cd90f3ef-f234-46de-b887-92dd7373e715",
      "name": "å›è¦† Line è¨Šæ¯1",
      "notes": "å‘ŠçŸ¥ç”¨æˆ¶å·²æ”¶åˆ°å½±ç‰‡ä¸¦é–‹å§‹è™•ç†"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.line.me/v2/bot/message/reply",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer /uiyigGndco4VEBA/zGwpPEljrT+MkAfnEagwQc48AshgaZDoxLy4bg7qiiyGLDQKckz4ayPZ0QZ2AGCl0rxgv9wTqnqpQuhHcGVc/UatTRPfW3V6IU11LbFXTz7wNAaHVW/2/XzhwRzQLuNjkbiVAdB04t89/1O/w1cDnyilFU="
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"replyToken\": \"{{ $('Line Webhook æ¥æ”¶1').item.json.body.events[0].replyToken }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"è©²æ¬¡å½±ç‰‡å·²è™•ç†å¥½ï¼Œè«‹è‡³  https://drive.google.com/file/d/{{ $('ä¸Šå‚³é›²ç«¯2').item.json.id }}/view?usp=drivesdk æŸ¥çœ‹\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4384,
        3792
      ],
      "id": "51aea8da-99e3-44eb-a039-4a024a41a89e",
      "name": "å›è¦† Line è¨Šæ¯é€šçŸ¥1",
      "notes": "å‘ŠçŸ¥ç”¨æˆ¶å·²æ”¶åˆ°å½±ç‰‡ä¸¦é–‹å§‹è™•ç†"
    },
    {
      "parameters": {
        "content": "ğŸ“ è¨­å®šèªªæ˜ï¼š\n\n1. Line Channel Access Token\n   - åˆ° Line Developers Console å–å¾—\n   - è¨­å®šåœ¨ã€Œä¸‹è¼‰ Line å½±ç‰‡ã€å’Œã€Œå›è¦† Line è¨Šæ¯ã€ç¯€é»\n\n\n",
        "height": 496,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4320,
        3456
      ],
      "typeVersion": 1,
      "id": "f09541a8-24ea-4b76-8b66-9176c358128a",
      "name": "è¨­å®šèªªæ˜3"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "hour": 10
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk",
          "mode": "list",
          "cachedResultName": "movie",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk"
        },
        "event": "fileCreated",
        "options": {}
      },
      "id": "e5a16626-272b-4788-8562-f9365516f014",
      "name": "Google Drive Trigger2",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        1568,
        4048
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "id": "904153cb-cd2b-406a-ab4d-78e277622de1",
      "name": "Download Video2",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        1920,
        3696
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "command": "=# æª¢æŸ¥ FFmpeg æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±å®‰è£\nif [ ! -f \"/root/.n8n/tools/ffmpeg\" ]; then\n  mkdir -p /root/.n8n/tools && wget -qO- https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-amd64-static.tar.xz | tar -xJ --strip-components=1 -C /root/.n8n/tools && chmod +x /root/.n8n/tools/ffmpeg\nfi\n\n# åŸ·è¡ŒéŸ³æª”è½‰æ›\n/root/.n8n/tools/ffmpeg -i \"/tmp/video.mp4\" -vn -acodec libmp3lame -ab 64k \"/tmp/audio.mp3\"\n\n\n\n\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2592,
        3696
      ],
      "id": "de2eff41-97ab-4da8-b994-ef8c43d95337",
      "name": "è½‰éŸ³æª”2"
    },
    {
      "parameters": {
        "command": "=# å®‰è£å­—é«”å¥—ä»¶\napk add --no-cache fontconfig ttf-dejavu font-noto-cjk\n\necho '{{ $json.data }}' > /tmp/subtitles.srt\n\n/root/.n8n/tools/ffmpeg -hide_banner -loglevel error -i \"/tmp/video.mp4\" -vf \"subtitles=/tmp/subtitles.srt:force_style='FontName=Noto Sans CJK TC,FontSize=24'\" -c:a copy \"/tmp/video_with_subtitles.mp4\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        3264,
        3792
      ],
      "id": "3d4d6f7f-e9d5-4e21-8da2-d4862e158172",
      "name": "ç‡’å›å½±ç‰‡2"
    },
    {
      "parameters": {
        "fileSelector": "=/tmp/video_with_subtitles.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        3488,
        3792
      ],
      "id": "08c07baa-081c-4d5a-83d4-515518b37313",
      "name": "è½‰å›æª”æ¡ˆ2"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "binaryData": true,
        "name": "=Line UPload ({{ $('Download Video2').item.json.name }})",
        "parents": [
          "1QAs4ucGqfc3cMyGcveGP31qPDItVBpF3"
        ],
        "options": {}
      },
      "id": "2e58acb4-0af3-49f5-b79a-53909719c08c",
      "name": "ä¸Šå‚³é›²ç«¯2",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        3712,
        3792
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "/tmp/video.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2368,
        3792
      ],
      "id": "cf6ea0d2-b1e3-4a52-b0ac-a8e213a5007f",
      "name": "å¯«é€²n8n2"
    },
    {
      "parameters": {
        "fileSelector": "=/tmp/audio.mp3",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2816,
        3696
      ],
      "id": "dc3ac766-2297-4657-a8e6-012fab394ebb",
      "name": "è®€å–è©²n8n å½±ç‰‡æª”2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/audio/transcriptions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer [REMOVED]"
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            },
            {
              "name": "model",
              "value": "whisper-1"
            },
            {
              "name": "response_format",
              "value": "srt"
            },
            {
              "name": "language",
              "value": "zh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3040,
        3696
      ],
      "id": "93c2c0bb-6f42-4b30-a04c-1a5ccc589282",
      "name": "AI æ“·å–éŸ³æª”2"
    },
    {
      "parameters": {
        "operation": "createFromText",
        "content": "={{ $json.data }}",
        "name": "={{ $today.format('yyyy-MM-dd')}}_{{ $('è®€å–è©²n8n å½±ç‰‡æª”2').item.json.fileName }}",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1jjVHQl1ev95zFMYSm_stqbrWJ7_eN6Zc",
          "mode": "list",
          "cachedResultName": "éŸ³æª”è½‰æ–‡å­—",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1jjVHQl1ev95zFMYSm_stqbrWJ7_eN6Zc"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        3264,
        3600
      ],
      "id": "21ff4567-3fc8-4e19-86c8-c2a5d8c24c8e",
      "name": "å°‡éŸ³æª”æ–‡å­—æª”å­˜èµ·ä¾†2",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "move",
        "fileId": {
          "__rl": true,
          "value": "={{ $('Upload file1').item.json.id }}",
          "mode": "id"
        },
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1e7IrHoXQDG3Z7jIZZ8fcN7VPcYgYWbYf",
          "mode": "list",
          "cachedResultName": "è™•ç†å®Œçš„å½±ç‰‡",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1e7IrHoXQDG3Z7jIZZ8fcN7VPcYgYWbYf"
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        4160,
        3792
      ],
      "id": "0b87f214-cd11-4134-b459-be861b4fde4c",
      "name": "ç§»å‹•åˆ°å·²è™•ç†å½±ç‰‡2",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "command": "=# å°‡å¤§æª”æ¡ˆå¯«å…¥ç£ç¢Ÿ\necho \"{{ $binary.data }}\" | base64 -d > /tmp/original_video.mp4\n\n# å£“ç¸®å½±ç‰‡\n/root/.n8n/tools/ffmpeg -i \"/tmp/original_video.mp4\" -vcodec libx264 -crf 28 -preset fast -vf \"scale=720:-2\" \"/tmp/video.mp4\"\n\n# æ¸…ç†åŸæª”æ¡ˆ\nrm -f /tmp/original_video.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2368,
        3600
      ],
      "id": "9d2b224b-e15a-4ceb-94d5-1eb89e625a66",
      "name": "å£“ç¸®2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "44df57cb-0ed9-4165-92db-44fa7e737c91",
              "leftValue": "={{ $json.size.toNumber() }}",
              "rightValue": 50000000,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2144,
        3696
      ],
      "id": "80700c95-a338-4290-ae4c-e79099a46481",
      "name": "If  å¦‚æœå¤§æ–¼50 MB2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "message-type-check",
              "leftValue": "={{ $json.body.events[0].message.type }}",
              "rightValue": "video",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1200,
        4864
      ],
      "id": "861f4817-a7fa-4ac2-b75c-aad5557a0ef8",
      "name": "æª¢æŸ¥è¨Šæ¯é¡å‹"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://www.y2mate.com/mates/analyzeV2/ajax",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/x-www-form-urlencoded"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
            }
          ]
        },
        "sendBody": true,
        "contentType": "form-urlencoded",
        "bodyParameters": {
          "parameters": [
            {
              "name": "k_query",
              "value": "={{ $json.chatInput }}"
            },
            {
              "name": "k_page",
              "value": "home"
            },
            {
              "name": "hl",
              "value": "zh"
            },
            {
              "name": "q_auto",
              "value": "1"
            }
          ]
        },
        "options": {}
      },
      "id": "71a60efd-1196-4dc5-ba3c-c786128874be",
      "name": "åˆ†æ YouTube é€£çµ",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1456,
        5024
      ],
      "typeVersion": 4.2
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "success-check",
              "leftValue": "={{ $json.status }}",
              "rightValue": "ok",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1696,
        5024
      ],
      "id": "7f01aebe-d4fc-42f1-9ee8-d29ab409ce9d",
      "name": "æª¢æŸ¥åˆ†æçµæœ"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://www.y2mate.com/mates/convertV2/index",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/x-www-form-urlencoded"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
            }
          ]
        },
        "sendBody": true,
        "contentType": "form-urlencoded",
        "bodyParameters": {
          "parameters": [
            {
              "name": "vid",
              "value": "={{ $json.vid }}"
            },
            {
              "name": "k",
              "value": "={{ Object.keys($json.links.mp4)[0] }}"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "id": "b56350ce-0d7f-4fcf-be4a-a5caedfc00af",
      "name": "ä¸‹è¼‰ YouTube å½±ç‰‡",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        1904,
        5008
      ],
      "typeVersion": 4.2
    },
    {
      "parameters": {
        "name": "={{ $today.format('yyyy-MM-dd-HHmmss') }}_{{ $('åˆ†æ YouTube é€£çµ').item.json.title || 'youtube_video' }}.mp4",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk",
          "mode": "list",
          "cachedResultName": "movie",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        2160,
        4864
      ],
      "id": "25815bf1-6d68-41b2-bb69-2bbede470389",
      "name": "ä¸Šå‚³åˆ° Google Drive",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/reply",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer /uiyigGndco4VEBA/zGwpPEljrT+MkAfnEagwQc48AshgaZDoxLy4bg7qiiyGLDQKckz4ayPZ0QZ2AGCl0rxgv9wTqnqpQuhHcGVc/UatTRPfW3V6IU11LbFXTz7wNAaHVW/2/XzhwRzQLuNjkbiVAdB04t89/1O/w1cDnyilFU="
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"replyToken\": \"{{ $('Line Webhook æ¥æ”¶2').item.json.body.events[0].replyToken }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"âœ… å½±ç‰‡è™•ç†å®Œæˆï¼\\n\\nğŸ“¹ {{ $('åˆ†æ YouTube é€£çµ').item.json.title }}\\nğŸ“ å·²ä¸Šå‚³åˆ° Google Drive\\nğŸ”— é€£çµ: {{ $json.webViewLink }}\\n\\nğŸ·ï¸ æª”æ¡ˆå¤§å°: {{ ($json.size / 1048576).toFixed(2) }} MB\\nâ±ï¸ è™•ç†æ™‚é–“: {{ $today.format('HH:mm:ss') }}\\n\\nğŸ“± ç”± ZN Studio è‡ªå‹•è™•ç†\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2400,
        4864
      ],
      "id": "868a71bd-1a42-464c-bfa1-5e28804dc35a",
      "name": "Line OA æˆåŠŸå›è¦†"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/reply",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer /uiyigGndco4VEBA/zGwpPEljrT+MkAfnEagwQc48AshgaZDoxLy4bg7qiiyGLDQKckz4ayPZ0QZ2AGCl0rxgv9wTqnqpQuhHcGVc/UatTRPfW3V6IU11LbFXTz7wNAaHVW/2/XzhwRzQLuNjkbiVAdB04t89/1O/w1cDnyilFU="
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"replyToken\": \"{{ $('Line Webhook æ¥æ”¶2').item.json.body.events[0].replyToken }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"âŒ YouTube å½±ç‰‡è™•ç†å¤±æ•—\\n\\nå¯èƒ½åŸå› ï¼š\\nâ€¢ å½±ç‰‡é€£çµç„¡æ•ˆ\\nâ€¢ å½±ç‰‡å—ä¿è­·æˆ–ç§äºº\\nâ€¢ æœå‹™æš«æ™‚ç„¡æ³•ä½¿ç”¨\\n\\nğŸ’¡ å»ºè­°ï¼š\\nâ€¢ ç¢ºèªé€£çµæ­£ç¢º\\nâ€¢ å˜—è©¦å…¶ä»–å½±ç‰‡\\nâ€¢ ç›´æ¥ä¸Šå‚³å½±ç‰‡æª”æ¡ˆ\\n\\nğŸ“§ æŠ€è¡“æ”¯æ´: nickleo051216@gmail.com\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1936,
        5184
      ],
      "id": "ad8a030d-3771-462a-8e35-712f3d3357b4",
      "name": "YouTube éŒ¯èª¤å›è¦†"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "movie",
        "options": {}
      },
      "id": "75e7c11d-aa5d-453c-842a-8429d95c2f20",
      "name": "Line Webhook æ¥æ”¶2",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        704,
        4832
      ],
      "webhookId": "[REMOVED]"
    },
    {
      "parameters": {
        "url": "=https://api-data.line.me/v2/bot/message/{{ $json.body.events[0].message.id }}/content",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer /uiyigGndco4VEBA/zGwpPEljrT+MkAfnEagwQc48AshgaZDoxLy4bg7qiiyGLDQKckz4ayPZ0QZ2AGCl0rxgv9wTqnqpQuhHcGVc/UatTRPfW3V6IU11LbFXTz7wNAaHVW/2/XzhwRzQLuNjkbiVAdB04t89/1O/w1cDnyilFU="
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1440,
        4720
      ],
      "id": "47bd4399-f2fd-42f6-83c9-05430c5b9caa",
      "name": "ä¸‹è¼‰ Line å½±ç‰‡2"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        880,
        7040
      ],
      "id": "b46b2aed-6b4f-498f-842c-28b8ce2722be",
      "name": "When chat message received",
      "webhookId": "[REMOVED]"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\n\n# --- è…³æœ¬è¨­å®š ---\n# ç™¼ç”Ÿä»»ä½•éŒ¯èª¤æ™‚ç«‹å³åœæ­¢\nset -e\n\n# --- 1. ç’°å¢ƒèˆ‡è·¯å¾‘æº–å‚™ ---\n# å®šç¾©ä¸€å€‹æŒä¹…åŒ–çš„å·¥å…·å®‰è£ç›®éŒ„\nTOOLS_DIR=\"/home/node/.n8n/tools\"\n# å»ºç«‹ç›®éŒ„ (å¦‚æœä¸å­˜åœ¨)\nmkdir -p \"$TOOLS_DIR\"\n\n# å®šç¾©å·¥å…·çš„å®Œæ•´è·¯å¾‘\nFFMPEG_PATH=\"$TOOLS_DIR/ffmpeg\"\nPYTHON_INSTALL_DIR=\"$TOOLS_DIR/python\"\nPYTHON_PATH=\"$PYTHON_INSTALL_DIR/bin/python3\"\nYTDLP_PATH=\"$TOOLS_DIR/yt-dlp\"\n\necho \"INFO: å·¥å…·å°‡è¢«å®‰è£åœ¨ $TOOLS_DIR (aarch64 ARM æ¶æ§‹)\"\n\n# --- 2. æª¢æŸ¥ä¸¦å®‰è£ FFmpeg (aarch64 ç‰ˆ) ---\nif [ ! -f \"$FFMPEG_PATH\" ]; then\n  echo \"INFO: FFmpeg (aarch64) ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  # !! ä¿®æ­£é» !! ä¸‹è¼‰ arm64 (aarch64) ç‰ˆæœ¬çš„ FFmpeg\n  wget -qO- \"https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-arm64-static.tar.xz\" | tar -xJ --strip-components=1 -C \"$TOOLS_DIR\"\n  chmod +x \"$FFMPEG_PATH\"\n  echo \"INFO: FFmpeg (aarch64) å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: FFmpeg å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n\n# --- 3. æª¢æŸ¥ä¸¦å®‰è£ Python (aarch64/musl ç‰ˆ) ---\nif [ ! -f \"$PYTHON_PATH\" ]; then\n  echo \"INFO: Python (aarch64/musl) ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  # !! ä¿®æ­£é» !! ä¸‹è¼‰ aarch64/musl ç‰ˆæœ¬çš„ Python\n  wget -qO- \"https://github.com/indygreg/python-build-standalone/releases/download/20240415/cpython-3.11.9+20240415-aarch64-unknown-linux-musl-install_only.tar.gz\" | tar -xz -C \"$TOOLS_DIR\"\n  echo \"INFO: Python (aarch64/musl) å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: Python å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n\n# --- 4. æª¢æŸ¥ä¸¦å®‰è£ yt-dlp (é€šç”¨) ---\nif [ ! -f \"$YTDLP_PATH\" ]; then\n  echo \"INFO: yt-dlp ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  wget -q \"https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp\" -O \"$YTDLP_PATH\"\n  echo \"INFO: yt-dlp å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: yt-dlp å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        976,
        3824
      ],
      "id": "2b838d1b-fac6-43ef-b38f-52684c12f8b7",
      "name": "Execute Command"
    },
    {
      "parameters": {
        "command": "=/home/node/.n8n/tools/yt-dlp --write-auto-sub --sub-lang zh-TW,en --skip-download \"{{ $('When chat message received').item.json.chatInput }}\""
      },
      "name": "ä¸‹è¼‰å½±ç‰‡",
      "type": "n8n-nodes-base.executeCommand",
      "position": [
        1648,
        6304
      ],
      "id": "057b1971-bad2-474f-8bb0-9f646e6f72a5",
      "typeVersion": 1
    },
    {
      "parameters": {
        "command": "ls -la /home/node/downloads/"
      },
      "name": "åˆ—å‡ºæª”æ¡ˆ",
      "type": "n8n-nodes-base.executeCommand",
      "position": [
        2016,
        5904
      ],
      "id": "9a1412ef-7263-42a1-b3c6-de1724733fe6",
      "typeVersion": 1
    },
    {
      "parameters": {
        "command": "=# æª¢æŸ¥ yt-dlp æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±å®‰è£\nif [ ! -f \"/root/.n8n/tools/yt-dlp\" ]; then\n  mkdir -p /root/.n8n/tools\n  wget -O /root/.n8n/tools/yt-dlp https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp\n  chmod +x /root/.n8n/tools/yt-dlp\nfi\n\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1360,
        5872
      ],
      "id": "ddeb929d-eacd-4530-ba88-fb422eec4f59",
      "name": "Execute Command1"
    },
    {
      "parameters": {
        "youtubeId": "https://www.youtube.com/watch?v=OMVkypYRxNc"
      },
      "type": "n8n-nodes-youtube-transcript.youtubeTranscriptNode",
      "typeVersion": 1,
      "position": [
        2080,
        6176
      ],
      "id": "c1cdc98f-143a-47a6-a8f9-593fb5d2ca70",
      "name": "Youtube Transcript"
    },
    {
      "parameters": {
        "youtubeId": "https://www.youtube.com/watch?v=OMVkypYRxNc"
      },
      "type": "n8n-nodes-youtube-transcript.youtubeTranscriptNode",
      "typeVersion": 1,
      "position": [
        1760,
        5808
      ],
      "id": "e7151269-81df-4428-af1f-c9898a191c56",
      "name": "Youtube Transcript1"
    },
    {
      "parameters": {
        "command": "=# æ›´æ–°å¥—ä»¶æ¸…å–®ä¸¦å®‰è£ Chromium\napt-get update && apt-get install -y chromium chromium-driver fonts-liberation libappindicator3-1 libasound2 libatk-bridge2.0-0 libatk1.0-0 libcups2 libdbus-1-3 libgdk-pixbuf2.0-0 libnspr4 libnss3 libxcomposite1 libxdamage1 libxrandr2 xdg-utils\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1216,
        6000
      ],
      "id": "7efa1eab-dc60-488d-8f5e-da89d03350e8",
      "name": "Execute Command2"
    },
    {
      "parameters": {
        "command": "=\n\n# --- 3. æª¢æŸ¥ä¸¦å®‰è£ Python (aarch64/musl ç‰ˆ) ---\nif [ ! -f \"$PYTHON_PATH\" ]; then\n  echo \"INFO: Python (aarch64/musl) ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  # !! ä¿®æ­£é» !! ä¸‹è¼‰ aarch64/musl ç‰ˆæœ¬çš„ Python\n  wget -qO- \"https://github.com/indygreg/python-build-standalone/releases/download/20240415/cpython-3.11.9+20240415-aarch64-unknown-linux-musl-install_only.tar.gz\" | tar -xz -C \"$TOOLS_DIR\"\n  echo \"INFO: Python (aarch64/musl) å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: Python å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n\n# --- 4. æª¢æŸ¥ä¸¦å®‰è£ yt-dlp (é€šç”¨) ---\nif [ ! -f \"$YTDLP_PATH\" ]; then\n  echo \"INFO: yt-dlp ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  wget -q \"https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp\" -O \"$YTDLP_PATH\"\n  echo \"INFO: yt-dlp å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: yt-dlp å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1056,
        5840
      ],
      "id": "816c07b5-37de-47fb-8a9e-28434e7b9f69",
      "name": "Execute Command3"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "youtube",
        "options": {}
      },
      "id": "3cf6bea3-5e75-4bb2-8b73-a04e26194493",
      "name": "YouTube Webhook æ¥æ”¶",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        672,
        7136
      ],
      "webhookId": "[REMOVED]",
      "notes": "æ¥æ”¶ YouTube é€£çµ\næ ¼å¼: {\"youtube_url\": \"https://www.youtube.com/watch?v=VIDEO_ID\"}"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "youtube-url-check",
              "leftValue": "={{ $json.chatInput }}",
              "rightValue": "youtube.com",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1088,
        7056
      ],
      "id": "150cf743-9e23-4a9b-a344-3c9aa03f56c1",
      "name": "æª¢æŸ¥æ˜¯å¦ç‚º YouTube é€£çµ"
    },
    {
      "parameters": {
        "fileSelector": "/tmp/youtube_video.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1856,
        7024
      ],
      "id": "bc378170-7022-457a-bc24-831170131f1f",
      "name": "è®€å– YouTube å½±ç‰‡æª”"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "binaryData": true,
        "name": "=YouTube_{{ $today.format('yyyy-MM-dd_HH-mm') }}.mp4",
        "parents": [
          "1hS-iRtRZvoIdzgbKM2r19Jg03ZXoLNTk"
        ],
        "options": {}
      },
      "id": "6d620edc-a29c-44a6-8b97-fdc9fd5cace3",
      "name": "ä¸Šå‚³ YouTube å½±ç‰‡åˆ°é›²ç«¯",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        2032,
        7056
      ],
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/push",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer /uiyigGndco4VEBA/zGwpPEljrT+MkAfnEagwQc48AshgaZDoxLy4bg7qiiyGLDQKckz4ayPZ0QZ2AGCl0rxgv9wTqnqpQuhHcGVc/UatTRPfW3V6IU11LbFXTz7wNAaHVW/2/XzhwRzQLuNjkbiVAdB04t89/1O/w1cDnyilFU="
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"to\": \"{{ $json.body.user_id || 'YOUR_USER_ID' }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"YouTube å½±ç‰‡å·²é–‹å§‹è™•ç†ï¼Œå®Œæˆå¾Œæœƒé€šçŸ¥æ‚¨ï¼\\n\\nå½±ç‰‡é€£çµ: {{ $json.body.youtube_url }}\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1488,
        6848
      ],
      "id": "0373bf3a-c79b-416c-8d21-4b9168884dfc",
      "name": "é€šçŸ¥é–‹å§‹è™•ç† YouTube"
    },
    {
      "parameters": {
        "command": "=# æ¸…ç† YouTube ä¸‹è¼‰çš„æš«å­˜æª”æ¡ˆ\n# ä½œè€…: Nick Chang | nickleo051216@gmail.com | 0932-684-051\n\necho \"INFO: æ¸…ç† YouTube æš«å­˜æª”æ¡ˆ...\"\nrm -f /tmp/youtube_video.*\necho \"INFO: æ¸…ç†å®Œæˆ\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2304,
        7056
      ],
      "id": "7c314d40-7e02-4d52-be62-266c0157e10d",
      "name": "æ¸…ç† YouTube æš«å­˜æª”"
    },
    {
      "parameters": {
        "command": "=\n\n# è¨­å®šè·¯å¾‘\nYTDLP_PATH=\"/home/node/.n8n/tools/yt-dlp\"\nCOOKIES_FILE=\"/tmp/youtube_cookies.txt\"\n\n# æ–¹æ³•ä¸€ï¼šå˜—è©¦å¾ç³»çµ±æå–ç¾æœ‰cookies\necho \"æ–¹æ³•ä¸€ï¼šæª¢æŸ¥ç³»çµ±ä¸­çš„ç€è¦½å™¨ cookies...\"\n\n# æª¢æŸ¥æ˜¯å¦æœ‰ç€è¦½å™¨å®‰è£\nif command -v firefox >/dev/null 2>&1; then\n    echo \"æ‰¾åˆ° Firefoxï¼Œå˜—è©¦æå– cookies...\"\n    \"$YTDLP_PATH\" --cookies-from-browser firefox --print-json \"https://www.youtube.com\" --no-download > /tmp/firefox_test.json 2>/dev/null\n    if [ -s /tmp/firefox_test.json ]; then\n        echo \"Firefox cookies å¯ç”¨\"\n        BROWSER_COOKIES=\"firefox\"\n    fi\nelif command -v chrome >/dev/null 2>&1; then\n    echo \"æ‰¾åˆ° Chromeï¼Œå˜—è©¦æå– cookies...\"\n    \"$YTDLP_PATH\" --cookies-from-browser chrome --print-json \"https://www.youtube.com\" --no-download > /tmp/chrome_test.json 2>/dev/null\n    if [ -s /tmp/chrome_test.json ]; then\n        echo \"Chrome cookies å¯ç”¨\"\n        BROWSER_COOKIES=\"chrome\"\n    fi\nelse\n    echo \"æœªæ‰¾åˆ°ç€è¦½å™¨ï¼Œç„¡æ³•æå–ç¾æœ‰ cookies\"\nfi\n\n# æ–¹æ³•äºŒï¼šç”ŸæˆåŸºæœ¬çš„ session cookies\necho \"\"\necho \"æ–¹æ³•äºŒï¼šç”ŸæˆåŸºæœ¬çš„ YouTube session cookies...\"\n\n# å‰µå»ºåŸºæœ¬çš„ cookies æª”æ¡ˆ\ncat > \"$COOKIES_FILE\" << 'EOF'\n# Netscape HTTP Cookie File\n.youtube.com\tTRUE\t/\tTRUE\t1735689600\tCONSENT\tYES+cb\n.youtube.com\tTRUE\t/\tFALSE\t1735689600\tVISITOR_INFO1_LIVE\trandom_visitor_id\n.youtube.com\tTRUE\t/\tFALSE\t1735689600\tYSC\trandom_session_id\nwww.youtube.com\tFALSE\t/\tFALSE\t1735689600\tGPS\t1\nEOF\n\necho \"åŸºæœ¬ cookies æª”æ¡ˆå·²ç”Ÿæˆ: $COOKIES_FILE\"\n\n# æ–¹æ³•ä¸‰ï¼šå˜—è©¦ç„¡ cookies ä½†ä½¿ç”¨æ›´å¥½çš„ headers\necho \"\"\necho \"æ–¹æ³•ä¸‰ï¼šæ¸¬è©¦ä¸åŒçš„æ–¹æ³•...\"\n\n# å–å¾—æ¸¬è©¦ URL\nYOUTUBE_URL=\"\"\nif [ -z \"$YOUTUBE_URL\" ] || [ \"$YOUTUBE_URL\" = \"{{ $('When chat message received').item.json.chatInput }}\" ]; then\n    YOUTUBE_URL=\"https://www.youtube.com/watch?v=OMVkypYRxNc\"\nfi\n\nCLEAN_URL=$(echo \"$YOUTUBE_URL\" | tr -d '\\n\\r' | sed 's/^[ \\t]*//;s/[ \\t]*$//')\necho \"æ¸¬è©¦ URL: $CLEAN_URL\"\n\n# æ¸…ç†èˆŠæª”æ¡ˆ\nrm -f /tmp/youtube_video.*\n\n# æ¸¬è©¦é †åºï¼šç€è¦½å™¨cookies -> æª”æ¡ˆcookies -> ç„¡cookiesé«˜ç´šåƒæ•¸\nSUCCESS=\"false\"\n\nif [ -n \"$BROWSER_COOKIES\" ]; then\n    echo \"æ¸¬è©¦ç€è¦½å™¨ cookies...\"\n    if \"$YTDLP_PATH\" \\\n        --cookies-from-browser \"$BROWSER_COOKIES\" \\\n        --format \"best[height<=480]/worst\" \\\n        --output \"/tmp/youtube_video.%(ext)s\" \\\n        --no-playlist \\\n        \"$CLEAN_URL\" 2>/dev/null; then\n        SUCCESS=\"true\"\n        echo \"ç€è¦½å™¨ cookies æ–¹æ³•æˆåŠŸ\"\n    fi\nfi\n\nif [ \"$SUCCESS\" = \"false\" ]; then\n    echo \"æ¸¬è©¦æª”æ¡ˆ cookies...\"\n    if \"$YTDLP_PATH\" \\\n        --cookies \"$COOKIES_FILE\" \\\n        --format \"best[height<=480]/worst\" \\\n        --output \"/tmp/youtube_video.%(ext)s\" \\\n        --no-playlist \\\n        --user-agent \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\" \\\n        \"$CLEAN_URL\" 2>/dev/null; then\n        SUCCESS=\"true\"\n        echo \"æª”æ¡ˆ cookies æ–¹æ³•æˆåŠŸ\"\n    fi\nfi\n\nif [ \"$SUCCESS\" = \"false\" ]; then\n    echo \"æ¸¬è©¦é€²éšç„¡ cookies æ–¹æ³•...\"\n    \"$YTDLP_PATH\" \\\n        --format \"worst[height<=360]/worst\" \\\n        --output \"/tmp/youtube_video.%(ext)s\" \\\n        --no-playlist \\\n        --user-agent \"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\" \\\n        --add-header \"Accept-Language:en-US,en;q=0.9\" \\\n        --extractor-args \"youtube:player_client=web,android_music\" \\\n        --sleep-interval 3 \\\n        --max-sleep-interval 6 \\\n        \"$CLEAN_URL\" 2>/dev/null\n    \n    if ls /tmp/youtube_video.* >/dev/null 2>&1; then\n        SUCCESS=\"true\"\n        echo \"é€²éšæ–¹æ³•æˆåŠŸ\"\n    fi\nfi\n\n# æª¢æŸ¥æœ€çµ‚çµæœ\necho \"\"\necho \"=========================================\"\necho \"çµæœæª¢æŸ¥\"\necho \"=========================================\"\n\nif ls /tmp/youtube_video.* >/dev/null 2>&1; then\n    FINAL_FILE=$(ls /tmp/youtube_video.* | head -1)\n    echo \"ä¸‹è¼‰æˆåŠŸ: $FINAL_FILE\"\n    \n    # æª¢æŸ¥æª”æ¡ˆå¤§å°\n    FILE_SIZE=$(stat -c%s \"$FINAL_FILE\")\n    FILE_SIZE_KB=$((FILE_SIZE / 1024))\n    \n    echo \"æª”æ¡ˆå¤§å°: ${FILE_SIZE_KB}KB\"\n    ls -lh \"$FINAL_FILE\"\n    \n    if [ \"$FILE_SIZE\" -gt 1000 ]; then\n        # é‡æ–°å‘½åç‚ºæ¨™æº–æ ¼å¼\n        mv \"$FINAL_FILE\" \"/tmp/youtube_video.mp4\"\n        echo \"æª”æ¡ˆå·²é‡æ–°å‘½åç‚º: /tmp/youtube_video.mp4\"\n        echo \"\"\n        echo \"YouTube ä¸‹è¼‰æˆåŠŸï¼\"\n        echo \"æª”æ¡ˆå·²æº–å‚™å¥½é€²å…¥å½±ç‰‡è™•ç†æµç¨‹\"\n    else\n        echo \"æª”æ¡ˆå¤ªå°ï¼Œå¯èƒ½ä¸‹è¼‰ä¸å®Œæ•´\"\n    fi\nelse\n    echo \"æ‰€æœ‰æ–¹æ³•éƒ½å¤±æ•—äº†\"\n    echo \"\"\n    echo \"æ›¿ä»£å»ºè­°ï¼š\"\n    echo \"1. æ‰‹å‹•åœ¨é›»è…¦ä¸Šä¸‹è¼‰ YouTube å½±ç‰‡ï¼Œç„¶å¾Œé€é Line ä¸Šå‚³\"\n    echo \"2. ä½¿ç”¨å…¶ä»–å½±ç‰‡ä¾†æºï¼ˆç›´æ¥ MP4 é€£çµï¼‰\"\n    echo \"3. å˜—è©¦ä¸åŒçš„ YouTube å½±ç‰‡ URL\"\nfi\n\necho \"\"\necho \"=========================================\"\necho \"Cookies ç”Ÿæˆæ¸¬è©¦å®Œæˆ\"\necho \"=========================================\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1600,
        7184
      ],
      "id": "c8c34545-9b3d-4a64-b1a1-2827397aba8b",
      "name": "ä¸‹è¼‰ YouTube å½±ç‰‡1"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\n\n# --- è…³æœ¬è¨­å®š ---\n# ç™¼ç”Ÿä»»ä½•éŒ¯èª¤æ™‚ç«‹å³åœæ­¢\nset -e\n\n# --- 1. ç’°å¢ƒèˆ‡è·¯å¾‘æº–å‚™ ---\n# å®šç¾©ä¸€å€‹æŒä¹…åŒ–çš„å·¥å…·å®‰è£ç›®éŒ„\nTOOLS_DIR=\"/home/node/.n8n/tools\"\n# å»ºç«‹ç›®éŒ„ (å¦‚æœä¸å­˜åœ¨)\nmkdir -p \"$TOOLS_DIR\"\n\n# å®šç¾©å·¥å…·çš„å®Œæ•´è·¯å¾‘\nFFMPEG_PATH=\"$TOOLS_DIR/ffmpeg\"\nPYTHON_INSTALL_DIR=\"$TOOLS_DIR/python\"\nPYTHON_PATH=\"$PYTHON_INSTALL_DIR/bin/python3\"\nYTDLP_PATH=\"$TOOLS_DIR/yt-dlp\"\n\necho \"INFO: å·¥å…·å°‡è¢«å®‰è£åœ¨ $TOOLS_DIR (aarch64 ARM æ¶æ§‹)\"\n\n# --- 2. æª¢æŸ¥ä¸¦å®‰è£ FFmpeg (aarch64 ç‰ˆ) ---\nif [ ! -f \"$FFMPEG_PATH\" ]; then\n  echo \"INFO: FFmpeg (aarch64) ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  # !! ä¿®æ­£é» !! ä¸‹è¼‰ arm64 (aarch64) ç‰ˆæœ¬çš„ FFmpeg\n  wget -qO- \"https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-arm64-static.tar.xz\" | tar -xJ --strip-components=1 -C \"$TOOLS_DIR\"\n  chmod +x \"$FFMPEG_PATH\"\n  echo \"INFO: FFmpeg (aarch64) å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: FFmpeg å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n\n# --- 3. æª¢æŸ¥ä¸¦å®‰è£ Python (aarch64/musl ç‰ˆ) ---\nif [ ! -f \"$PYTHON_PATH\" ]; then\n  echo \"INFO: Python (aarch64/musl) ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  # !! ä¿®æ­£é» !! ä¸‹è¼‰ aarch64/musl ç‰ˆæœ¬çš„ Python\n  wget -qO- \"https://github.com/indygreg/python-build-standalone/releases/download/20240415/cpython-3.11.9+20240415-aarch64-unknown-linux-musl-install_only.tar.gz\" | tar -xz -C \"$TOOLS_DIR\"\n  echo \"INFO: Python (aarch64/musl) å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: Python å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n\n# --- 4. æª¢æŸ¥ä¸¦å®‰è£ yt-dlp (é€šç”¨) ---\nif [ ! -f \"$YTDLP_PATH\" ]; then\n  echo \"INFO: yt-dlp ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  wget -q \"https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp\" -O \"$YTDLP_PATH\"\n  echo \"INFO: yt-dlp å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: yt-dlp å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1296,
        7072
      ],
      "id": "6d6475e3-515f-456b-96f2-0ecae89e6f3b",
      "name": "Execute Command4"
    },
    {
      "parameters": {
        "youtubeId": "={{ $('æª¢æŸ¥æ˜¯å¦ç‚º YouTube é€£çµ').item.json.chatInput }}"
      },
      "type": "n8n-nodes-youtube-transcript.youtubeTranscriptNode",
      "typeVersion": 1,
      "position": [
        1568,
        7008
      ],
      "id": "5f313564-0f9c-4368-8b4b-04fbb761ea5a",
      "name": "Youtube Transcript2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "youtube-url-check",
              "leftValue": "={{ $json.chatInput }}",
              "rightValue": "youtube.com",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        560,
        4480
      ],
      "id": "a4c3d64b-946d-4f87-8c0c-7a1eee1cb12b",
      "name": "æª¢æŸ¥æ˜¯å¦ç‚º YouTube é€£çµ1"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\n\n# --- è…³æœ¬è¨­å®š ---\n# ç™¼ç”Ÿä»»ä½•éŒ¯èª¤æ™‚ç«‹å³åœæ­¢\nset -e\n\n# --- 1. ç’°å¢ƒèˆ‡è·¯å¾‘æº–å‚™ ---\n# å®šç¾©ä¸€å€‹æŒä¹…åŒ–çš„å·¥å…·å®‰è£ç›®éŒ„\nTOOLS_DIR=\"/home/node/.n8n/tools\"\n# å»ºç«‹ç›®éŒ„ (å¦‚æœä¸å­˜åœ¨)\nmkdir -p \"$TOOLS_DIR\"\n\n# å®šç¾©å·¥å…·çš„å®Œæ•´è·¯å¾‘\nFFMPEG_PATH=\"$TOOLS_DIR/ffmpeg\"\nPYTHON_INSTALL_DIR=\"$TOOLS_DIR/python\"\nPYTHON_PATH=\"$PYTHON_INSTALL_DIR/bin/python3\"\nYTDLP_PATH=\"$TOOLS_DIR/yt-dlp\"\n\necho \"INFO: å·¥å…·å°‡è¢«å®‰è£åœ¨ $TOOLS_DIR (aarch64 ARM æ¶æ§‹)\"\n\n# --- 2. æª¢æŸ¥ä¸¦å®‰è£ FFmpeg (aarch64 ç‰ˆ) ---\nif [ ! -f \"$FFMPEG_PATH\" ]; then\n  echo \"INFO: FFmpeg (aarch64) ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  # !! ä¿®æ­£é» !! ä¸‹è¼‰ arm64 (aarch64) ç‰ˆæœ¬çš„ FFmpeg\n  wget -qO- \"https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-arm64-static.tar.xz\" | tar -xJ --strip-components=1 -C \"$TOOLS_DIR\"\n  chmod +x \"$FFMPEG_PATH\"\n  echo \"INFO: FFmpeg (aarch64) å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: FFmpeg å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n\n# --- 3. æª¢æŸ¥ä¸¦å®‰è£ Python (aarch64/musl ç‰ˆ) ---\nif [ ! -f \"$PYTHON_PATH\" ]; then\n  echo \"INFO: Python (aarch64/musl) ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  # !! ä¿®æ­£é» !! ä¸‹è¼‰ aarch64/musl ç‰ˆæœ¬çš„ Python\n  wget -qO- \"https://github.com/indygreg/python-build-standalone/releases/download/20240415/cpython-3.11.9+20240415-aarch64-unknown-linux-musl-install_only.tar.gz\" | tar -xz -C \"$TOOLS_DIR\"\n  echo \"INFO: Python (aarch64/musl) å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: Python å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n\n# --- 4. æª¢æŸ¥ä¸¦å®‰è£ yt-dlp (é€šç”¨) ---\nif [ ! -f \"$YTDLP_PATH\" ]; then\n  echo \"INFO: yt-dlp ä¸å­˜åœ¨ï¼Œé–‹å§‹ä¸‹è¼‰ä¸¦å®‰è£...\"\n  wget -q \"https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp\" -O \"$YTDLP_PATH\"\n  echo \"INFO: yt-dlp å®‰è£å®Œæˆã€‚\"\nelse\n  echo \"INFO: yt-dlp å·²å­˜åœ¨ï¼Œè·³éå®‰è£ã€‚\"\nfi\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        832,
        4464
      ],
      "id": "438bd8be-956e-490c-b028-3743a57c5b3e",
      "name": "Execute Command5"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\nset -e\n\nYOUTUBE_URL=\"{{ $('Line Webhook æ¥æ”¶1').item.json.body.events[0].message.text }}\"\nTOOLS_DIR=\"/home/node/.n8n/tools\"\nYTDLP_PATH=\"$TOOLS_DIR/yt-dlp\"\n\n# æ›´ç°¡å–®çš„ä¸‹è¼‰æ–¹å¼\n$YTDLP_PATH \\\n  --format \"18/22/best[height<=360]\" \\\n  --output \"/tmp/video.%(ext)s\" \\\n  --no-warnings \\\n  \"$YOUTUBE_URL\"\n\n# æª¢æŸ¥ä¸¦é‡æ–°å‘½å\nif ls /tmp/video.* 1> /dev/null 2>&1; then\n    mv /tmp/video.* /tmp/video.mp4\nelse\n    echo \"ERROR: ä¸‹è¼‰å¤±æ•—\"\n    exit 1\nfi"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1312,
        4112
      ],
      "id": "62aa2b25-5b49-424b-ad95-f6e5a547e749",
      "name": "Execute Command6"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\nset -e\n\n# === å®šç¾©è·¯å¾‘è®Šæ•¸ ===\nTOOLS_DIR=\"/home/node/.n8n/tools\"\nYTDLP_PATH=\"$TOOLS_DIR/yt-dlp\"\n\n# === å–å¾— YouTube é€£çµ ===\nYOUTUBE_URL=\"{{ $('Line Webhook æ¥æ”¶1').item.json.body.events[0].message.text }}\"\necho \"ç›®æ¨™ç¶²å€: $YOUTUBE_URL\"\n\n# === æ–¹æ³•1: ä½¿ç”¨æœ€ç°¡å–®çš„æ ¼å¼ ===\necho \"å˜—è©¦æ–¹æ³•1: æœ€ç°¡å–®ä¸‹è¼‰...\"\n\"$YTDLP_PATH\" \\\n  --format \"18\" \\\n  --output \"/tmp/video.mp4\" \\\n  --no-warnings \\\n  --ignore-errors \\\n  --sleep-interval 1 \\\n  --max-sleep-interval 3 \\\n  \"$YOUTUBE_URL\" && {\n    echo \"âœ… æ–¹æ³•1 æˆåŠŸï¼\"\n    exit 0\n}\n\necho \"æ–¹æ³•1 å¤±æ•—ï¼Œå˜—è©¦æ–¹æ³•2...\"\n\n# === æ–¹æ³•2: ä½¿ç”¨ --cookies-from-browser ===\necho \"å˜—è©¦æ–¹æ³•2: æ¨¡æ“¬ç€è¦½å™¨...\"\n\"$YTDLP_PATH\" \\\n  --user-agent \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36\" \\\n  --add-header \"Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\" \\\n  --add-header \"Accept-Language:en-us,en;q=0.5\" \\\n  --add-header \"Sec-Fetch-Mode:navigate\" \\\n  --format \"worst[height<=480]\" \\\n  --output \"/tmp/video.mp4\" \\\n  --no-warnings \\\n  --sleep-interval 2 \\\n  --max-sleep-interval 5 \\\n  \"$YOUTUBE_URL\" && {\n    echo \"âœ… æ–¹æ³•2 æˆåŠŸï¼\"\n    exit 0\n}\n\necho \"æ–¹æ³•2 å¤±æ•—ï¼Œå˜—è©¦æ–¹æ³•3...\"\n\n# === æ–¹æ³•3: ä½¿ç”¨ --geo-bypass ===\necho \"å˜—è©¦æ–¹æ³•3: åœ°ç†ä½ç½®ç¹é...\"\n\"$YTDLP_PATH\" \\\n  --geo-bypass \\\n  --geo-bypass-country US \\\n  --format \"worst\" \\\n  --output \"/tmp/video.mp4\" \\\n  --no-warnings \\\n  --sleep-interval 3 \\\n  --max-sleep-interval 7 \\\n  \"$YOUTUBE_URL\" && {\n    echo \"âœ… æ–¹æ³•3 æˆåŠŸï¼\"\n    exit 0\n}\n\necho \"âŒ æ‰€æœ‰æ–¹æ³•éƒ½å¤±æ•—äº†ï¼ŒYouTube å¯èƒ½æš«æ™‚å°é–äº†æ­¤ IP\"\necho \"å»ºè­°: 1. ç­‰å¾…1-2å°æ™‚å¾Œå†è©¦ 2. æ›ä¸€å€‹æ¸¬è©¦å½±ç‰‡\"\nexit 1"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1184,
        3936
      ],
      "id": "7fe04e5f-6423-4a9b-8538-9a8298654204",
      "name": "Execute Command7"
    }
  ],
  "connections": {
    "Google Drive Trigger": {
      "main": [
        []
      ]
    },
    "Download Video": {
      "main": [
        [
          {
            "node": "If  å¦‚æœå¤§æ–¼50 MB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½‰éŸ³æª”": {
      "main": [
        [
          {
            "node": "è®€å–è©²n8n å½±ç‰‡æª”",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "ç‡’å›å½±ç‰‡": {
      "main": [
        [
          {
            "node": "è½‰å›æª”æ¡ˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½‰å›æª”æ¡ˆ": {
      "main": [
        [
          {
            "node": "ä¸Šå‚³é›²ç«¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸Šå‚³é›²ç«¯": {
      "main": [
        [
          {
            "node": "æ¸…é™¤1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ¸…é™¤1": {
      "main": [
        [
          {
            "node": "ç§»å‹•åˆ°å·²è™•ç†å½±ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¯«é€²n8n": {
      "main": [
        [
          {
            "node": "è½‰éŸ³æª”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è®€å–è©²n8n å½±ç‰‡æª”": {
      "main": [
        [
          {
            "node": "AI æ“·å–éŸ³æª”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI æ“·å–éŸ³æª”": {
      "main": [
        [
          {
            "node": "å°‡éŸ³æª”æ–‡å­—æª”å­˜èµ·ä¾†",
            "type": "main",
            "index": 0
          },
          {
            "node": "ç‡’å›å½±ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å£“ç¸®": {
      "main": [
        [
          {
            "node": "å£“ç¸®å¾Œè¦è½‰æª”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å£“ç¸®å¾Œè¦è½‰æª”": {
      "main": [
        [
          {
            "node": "å¯«é€²n8n",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If  å¦‚æœå¤§æ–¼50 MB": {
      "main": [
        [
          {
            "node": "å£“ç¸®",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "å¯«é€²n8n",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ¸…é™¤æš«å­˜": {
      "main": [
        [
          {
            "node": "ç§»å‹•åˆ°å·²è™•ç†å½±ç‰‡1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload file": {
      "main": [
        [
          {
            "node": "Download Video1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Line Webhook æ¥æ”¶": {
      "main": [
        [
          {
            "node": "å›è¦† Line è¨Šæ¯",
            "type": "main",
            "index": 0
          },
          {
            "node": "æª¢æŸ¥æ˜¯å¦ç‚ºå½±ç‰‡è¨Šæ¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æª¢æŸ¥æ˜¯å¦ç‚ºå½±ç‰‡è¨Šæ¯": {
      "main": [
        [
          {
            "node": "ä¸‹è¼‰ Line å½±ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸‹è¼‰ Line å½±ç‰‡": {
      "main": [
        [
          {
            "node": "Upload file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive Trigger1": {
      "main": [
        [
          {
            "node": "Download Video1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Video1": {
      "main": [
        [
          {
            "node": "If  å¦‚æœå¤§æ–¼50 MB1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½‰éŸ³æª”1": {
      "main": [
        [
          {
            "node": "è®€å–è©²n8n å½±ç‰‡æª”1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç‡’å›å½±ç‰‡1": {
      "main": [
        [
          {
            "node": "è½‰å›æª”æ¡ˆ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½‰å›æª”æ¡ˆ1": {
      "main": [
        [
          {
            "node": "ä¸Šå‚³é›²ç«¯1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸Šå‚³é›²ç«¯1": {
      "main": [
        [
          {
            "node": "æ¸…é™¤æš«å­˜",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¯«é€²n8n1": {
      "main": [
        [
          {
            "node": "è½‰éŸ³æª”1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è®€å–è©²n8n å½±ç‰‡æª”1": {
      "main": [
        [
          {
            "node": "AI æ“·å–éŸ³æª”1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI æ“·å–éŸ³æª”1": {
      "main": [
        [
          {
            "node": "å°‡éŸ³æª”æ–‡å­—æª”å­˜èµ·ä¾†1",
            "type": "main",
            "index": 0
          },
          {
            "node": "ç‡’å›å½±ç‰‡1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç§»å‹•åˆ°å·²è™•ç†å½±ç‰‡1": {
      "main": [
        [
          {
            "node": "å›è¦† Line è¨Šæ¯é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å£“ç¸®1": {
      "main": [
        [
          {
            "node": "è½‰éŸ³æª”1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If  å¦‚æœå¤§æ–¼50 MB1": {
      "main": [
        [
          {
            "node": "å£“ç¸®1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "å¯«é€²n8n1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ¸…é™¤æš«å­˜1": {
      "main": [
        [
          {
            "node": "ç§»å‹•åˆ°å·²è™•ç†å½±ç‰‡2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload file1": {
      "main": [
        [
          {
            "node": "Download Video2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Line Webhook æ¥æ”¶1": {
      "main": [
        [
          {
            "node": "å›è¦† Line è¨Šæ¯1",
            "type": "main",
            "index": 0
          },
          {
            "node": "æª¢æŸ¥æ˜¯å¦ç‚ºå½±ç‰‡è¨Šæ¯1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æª¢æŸ¥æ˜¯å¦ç‚ºå½±ç‰‡è¨Šæ¯1": {
      "main": [
        [],
        [
          {
            "node": "Execute Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸‹è¼‰ Line å½±ç‰‡1": {
      "main": [
        [
          {
            "node": "Upload file1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive Trigger2": {
      "main": [
        [
          {
            "node": "Download Video2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Video2": {
      "main": [
        [
          {
            "node": "If  å¦‚æœå¤§æ–¼50 MB2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½‰éŸ³æª”2": {
      "main": [
        [
          {
            "node": "è®€å–è©²n8n å½±ç‰‡æª”2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç‡’å›å½±ç‰‡2": {
      "main": [
        [
          {
            "node": "è½‰å›æª”æ¡ˆ2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½‰å›æª”æ¡ˆ2": {
      "main": [
        [
          {
            "node": "ä¸Šå‚³é›²ç«¯2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸Šå‚³é›²ç«¯2": {
      "main": [
        [
          {
            "node": "æ¸…é™¤æš«å­˜1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¯«é€²n8n2": {
      "main": [
        [
          {
            "node": "è½‰éŸ³æª”2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è®€å–è©²n8n å½±ç‰‡æª”2": {
      "main": [
        [
          {
            "node": "AI æ“·å–éŸ³æª”2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI æ“·å–éŸ³æª”2": {
      "main": [
        [
          {
            "node": "å°‡éŸ³æª”æ–‡å­—æª”å­˜èµ·ä¾†2",
            "type": "main",
            "index": 0
          },
          {
            "node": "ç‡’å›å½±ç‰‡2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç§»å‹•åˆ°å·²è™•ç†å½±ç‰‡2": {
      "main": [
        [
          {
            "node": "å›è¦† Line è¨Šæ¯é€šçŸ¥1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å£“ç¸®2": {
      "main": [
        [
          {
            "node": "è½‰éŸ³æª”2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If  å¦‚æœå¤§æ–¼50 MB2": {
      "main": [
        [
          {
            "node": "å£“ç¸®2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "å¯«é€²n8n2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æª¢æŸ¥è¨Šæ¯é¡å‹": {
      "main": [
        [
          {
            "node": "ä¸‹è¼‰ Line å½±ç‰‡2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "åˆ†æ YouTube é€£çµ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ†æ YouTube é€£çµ": {
      "main": [
        [
          {
            "node": "æª¢æŸ¥åˆ†æçµæœ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æª¢æŸ¥åˆ†æçµæœ": {
      "main": [
        [
          {
            "node": "ä¸‹è¼‰ YouTube å½±ç‰‡",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "YouTube éŒ¯èª¤å›è¦†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸‹è¼‰ YouTube å½±ç‰‡": {
      "main": [
        []
      ]
    },
    "ä¸Šå‚³åˆ° Google Drive": {
      "main": [
        [
          {
            "node": "Line OA æˆåŠŸå›è¦†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Line Webhook æ¥æ”¶2": {
      "main": [
        []
      ]
    },
    "ä¸‹è¼‰ Line å½±ç‰‡2": {
      "main": [
        [
          {
            "node": "ä¸Šå‚³åˆ° Google Drive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "æª¢æŸ¥æ˜¯å¦ç‚º YouTube é€£çµ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸‹è¼‰å½±ç‰‡": {
      "main": [
        []
      ]
    },
    "åˆ—å‡ºæª”æ¡ˆ": {
      "main": [
        []
      ]
    },
    "Execute Command1": {
      "main": [
        []
      ]
    },
    "Execute Command2": {
      "main": [
        [
          {
            "node": "Execute Command1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command3": {
      "main": [
        []
      ]
    },
    "YouTube Webhook æ¥æ”¶": {
      "main": [
        []
      ]
    },
    "æª¢æŸ¥æ˜¯å¦ç‚º YouTube é€£çµ": {
      "main": [
        [
          {
            "node": "Execute Command4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è®€å– YouTube å½±ç‰‡æª”": {
      "main": [
        []
      ]
    },
    "ä¸Šå‚³ YouTube å½±ç‰‡åˆ°é›²ç«¯": {
      "main": [
        [
          {
            "node": "æ¸…ç† YouTube æš«å­˜æª”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸‹è¼‰ YouTube å½±ç‰‡1": {
      "main": [
        [
          {
            "node": "è®€å– YouTube å½±ç‰‡æª”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command4": {
      "main": [
        []
      ]
    },
    "æª¢æŸ¥æ˜¯å¦ç‚º YouTube é€£çµ1": {
      "main": [
        [
          {
            "node": "Execute Command5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command": {
      "main": [
        [
          {
            "node": "Execute Command7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command7": {
      "main": [
        [
          {
            "node": "Execute Command6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {
    "node:Google Drive Trigger": {
      "lastTimeChecked": "2025-11-27T03:54:04Z"
    },
    "node:Google Drive Trigger1": {
      "lastTimeChecked": "2025-11-27T03:54:05Z"
    },
    "node:Google Drive Trigger2": {
      "lastTimeChecked": "2025-11-27T03:54:05Z"
    }
  },
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "1cfc2f83-f6ce-49a7-b957-f74e5b59c8be",
  "triggerCount": 8,
  "shared": [
    {
      "updatedAt": "2025-09-06T07:48:09.108Z",
      "createdAt": "2025-09-06T07:48:09.108Z",
      "role": "workflow:owner",
      "workflowId": "iEnosGi2fBAjpBwE",
      "projectId": "4W71QCd0cKKsiKSS"
    }
  ],
  "tags": []
}