{
  "updatedAt": "2025-12-14T06:50:31.137Z",
  "createdAt": "2025-06-17T16:11:28.345Z",
  "id": "S4DLz2IyXi3th9RZ",
  "name": "threadsAUTO",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 9
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -288,
        -1200
      ],
      "id": "0e8edb28-76e1-4bf8-8049-e27e284668dc",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "threads-post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "ContainerId": "={{ $json.id }}",
            "row_number": "={{ $('GetLastestUnpublish').item.json.row_number }}",
            "id": "={{ $('GetLastestUnpublish').item.json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Image",
              "displayName": "Image",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Tag",
              "displayName": "Tag",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Posted",
              "displayName": "Posted",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ContainerId",
              "displayName": "ContainerId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Time",
              "displayName": "Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1856,
        -640
      ],
      "id": "7b540794-650a-4555-97fa-fb4151db5ac5",
      "name": "InsertContainerId",
      "executeOnce": true,
      "retryOnFail": true,
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.threads.net/v1.0/23977660861892336/threads_publish",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('get threads new token').item.json.token }}"
            },
            {
              "name": "creation_id",
              "value": "={{ $json.ContainerId }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2080,
        -640
      ],
      "id": "cd12cd13-ca50-4ba6-b5c8-d09cd2140004",
      "name": "PublishPost",
      "executeOnce": true,
      "retryOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.threads.net/v1.0/23977660861892336/threads",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "media_type",
              "value": "TEXT"
            },
            {
              "name": "access_token",
              "value": "={{ $json.token }}"
            },
            {
              "name": "text",
              "value": "={{ $('Code').item.json.Content }}"
            },
            {}
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1680,
        -640
      ],
      "id": "7ec76325-ce80-42bc-93bc-4f3f492a86aa",
      "name": "CreatePostContainer",
      "alwaysOutputData": false,
      "retryOnFail": true,
      "executeOnce": true
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "threads-post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        976,
        -640
      ],
      "id": "bd35762d-6d60-486a-bd34-8feccb02c3ab",
      "name": "GetAllPost",
      "alwaysOutputData": false,
      "executeOnce": true,
      "retryOnFail": true,
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "threads-post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1152,
        -640
      ],
      "id": "d72344c4-968b-435c-b067-2fdc5eafb045",
      "name": "GetLastestUnpublish",
      "alwaysOutputData": false,
      "executeOnce": true,
      "retryOnFail": true,
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "jsCode": "// ä¿®æ­£ç‰ˆï¼šè™•ç†å¸ƒçˆ¾å€¼å’Œå­—ä¸²çš„æ··åˆæƒ…æ³\nconst allPosts = $input.all();\nconst unpublishedPosts = allPosts.filter(item => {\n  const posted = item.json.Posted;\n  \n  // è™•ç†ä¸åŒé¡å‹çš„ Posted å€¼\n  if (posted === true || posted === \"true\" || posted === \"True\") {\n    return false; // å·²ç™¼å¸ƒï¼Œæ’é™¤\n  }\n  \n  if (posted === false || posted === \"false\" || posted === \"False\" || posted === \"\" || posted === null || posted === undefined) {\n    return true; // æœªç™¼å¸ƒï¼Œä¿ç•™\n  }\n  \n  return true; // é è¨­ç‚ºæœªç™¼å¸ƒ\n});\n\n// å–å¾—ç¬¬ä¸€ç­†æœªç™¼å¸ƒçš„è²¼æ–‡\nif (unpublishedPosts.length > 0) {\n  return [unpublishedPosts[0]];\n} else {\n  return []; // æ²’æœ‰æœªç™¼å¸ƒçš„è²¼æ–‡ï¼Œè¿”å›ç©ºé™£åˆ—\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1312,
        -640
      ],
      "id": "6d988d35-be29-460f-b0b3-0c1a8d7d4780",
      "name": "Code"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "threads-post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Posted": "TRUE",
            "id": "={{ $('InsertContainerId').item.json.id }}",
            "CreateId": "={{ $json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Image",
              "displayName": "Image",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Tag",
              "displayName": "Tag",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Posted",
              "displayName": "Posted",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ContainerId",
              "displayName": "ContainerId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Time",
              "displayName": "Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "CreateId",
              "displayName": "CreateId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        2576,
        -640
      ],
      "id": "7dbe7707-6ef4-46b4-9c42-5902942daa21",
      "name": "UpdatePostStatus1",
      "executeOnce": true,
      "retryOnFail": true,
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/broadcast",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"{{ $json.cleanText }}\"\n    },\n    {\n      \"type\": \"flex\",\n      \"altText\": \"è²¼æ–‡æ“ä½œé¸å–®\",\n      \"contents\": {\n        \"type\": \"bubble\",\n        \"size\": \"kilo\",\n        \"header\": {\n          \"type\": \"box\",\n          \"layout\": \"vertical\",\n          \"contents\": [\n            {\n              \"type\": \"text\",\n              \"text\": \"ğŸ¤– å…§å®¹æ“ä½œé¸å–®\",\n              \"weight\": \"bold\",\n              \"color\": \"#ffffff\",\n              \"size\": \"lg\",\n              \"align\": \"center\"\n            }\n          ],\n          \"backgroundColor\": \"#6366f1\",\n          \"paddingAll\": \"15px\"\n        },\n        \"body\": {\n          \"type\": \"box\",\n          \"layout\": \"vertical\",\n          \"contents\": [\n            {\n              \"type\": \"text\",\n              \"text\": \"è«‹é¸æ“‡æ‚¨è¦åŸ·è¡Œçš„æ“ä½œï¼š\",\n              \"size\": \"sm\",\n              \"color\": \"#666666\",\n              \"margin\": \"sm\",\n              \"align\": \"center\"\n            },\n            {\n              \"type\": \"separator\",\n              \"margin\": \"md\"\n            }\n          ],\n          \"paddingAll\": \"15px\"\n        },\n        \"footer\": {\n          \"type\": \"box\",\n          \"layout\": \"vertical\",\n          \"spacing\": \"sm\",\n          \"contents\": [\n            {\n              \"type\": \"button\",\n              \"style\": \"primary\",\n              \"height\": \"sm\",\n              \"action\": {\n                \"type\": \"postback\",\n                \"label\": \"âœ… ç«‹å³ç™¼å¸ƒ\",\n                \"data\": \"action=PUBLISH\",\n                \"displayText\": \"ç™¼å¸ƒ\"\n              },\n              \"color\": \"#10b981\"\n            },\n            {\n              \"type\": \"button\",\n              \"style\": \"secondary\",\n              \"height\": \"sm\",\n              \"action\": {\n                \"type\": \"postback\",\n                \"label\": \"ğŸ”„ é‡æ–°ç”Ÿæˆ\",\n                \"data\": \"action=REGENERATE\",\n                \"displayText\": \"é‡æ–°ç”Ÿæˆ\"\n              },\n              \"color\": \"#6366f1\"\n            },\n            {\n              \"type\": \"button\",\n              \"style\": \"secondary\",\n              \"height\": \"sm\",\n              \"action\": {\n                \"type\": \"postback\",\n                \"label\": \"ğŸ“ æˆ‘è¦ä¿®æ”¹\",\n                \"data\": \"action=MODIFY\",\n                \"displayText\": \"æˆ‘è¦ä¿®æ”¹\"\n              },\n              \"color\": \"#f59e0b\"\n            }\n          ],\n          \"paddingAll\": \"15px\"\n        }\n      }\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        992,
        -1344
      ],
      "id": "c2321e94-c51f-4674-95ed-774ebf38a4cd",
      "name": "ç™¼é€å›æ‡‰çµ¦ LINE",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "jsCode": "// LINE Bot æ”¯æ´æ›è¡Œçš„ Code1 ä¿®æ­£ç‰ˆ\n// ç²å–å…§å®¹\nlet generatedContent;\nif ($input.first().json.message && $input.first().json.message.content) {\n  generatedContent = $input.first().json.message.content;\n} else if ($input.first().json.Content) {\n  generatedContent = $input.first().json.Content;\n} else {\n  generatedContent = \"ç„¡æ³•å–å¾—å…§å®¹\";\n}\n\n// å»ºç«‹ LINE è¨Šæ¯æ–‡å­—ï¼ˆä¿æŒæ›è¡Œï¼‰\nconst lineText = `ğŸ¤– AI ç‚ºä½ ç”Ÿæˆäº†æ–°çš„ iPAS è²¼æ–‡ï¼š\n\n${generatedContent}\n\nğŸ“ è«‹å›è¦†ï¼š\nâœ… ã€Œç™¼å¸ƒã€æˆ–ã€ŒYesã€- ç«‹å³ç™¼å¸ƒåˆ° Threads\nğŸ”„ ã€Œé‡æ–°ç”Ÿæˆã€- ç”Ÿæˆæ–°å…§å®¹\nğŸ“ ã€Œä¿®æ”¹ï¼š[ä½ çš„å»ºè­°]ã€- æ ¹æ“šå»ºè­°èª¿æ•´å…§å®¹`;\n\n// ğŸ”¥ é—œéµï¼šæ­£ç¢ºè½‰ç¾©æ›è¡Œç¬¦è™Ÿï¼Œè®“ LINE èƒ½é¡¯ç¤ºæ›è¡Œ\nconst cleanText = lineText\n  .replace(/\\r?\\n/g, '\\\\n')      // å°‡æ›è¡Œç¬¦è™Ÿè½‰ç¾©ç‚º \\\\nï¼ˆLINE æœƒæ­£ç¢ºè§£æï¼‰\n  .replace(/\"/g, '\\\\\"')          // è½‰ç¾©é›™å¼•è™Ÿ\n  .trim();                       // å»é™¤é¦–å°¾ç©ºç™½\n\n// è¿”å›è™•ç†éçš„è³‡æ–™\nreturn [{\n  json: {\n    Content: generatedContent,\n    cleanText: cleanText,\n    Posted: \"PENDING\",\n    Status: \"WAITING_APPROVAL\",\n    Time: new Date().toISOString()\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        768,
        -1344
      ],
      "id": "4f0933f9-991a-43a6-9476-7b85e9d8b0b7",
      "name": "Code1"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "366fa163-4b56-4f08-9bcf-bdaaedaa8f92",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -288,
        -544
      ],
      "id": "ad3c273d-f9a8-4d75-b5b5-1dc12f8d4681",
      "name": "Webhook",
      "webhookId": "[REMOVED]"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.action }}",
                    "rightValue": "PUBLISH",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "a5222d2e-4d1d-4275-a8ef-7b795945afaa"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "78ee16d2-5144-4dc9-af17-e45e2190e1c1",
                    "leftValue": "={{ $json.action }}",
                    "rightValue": "MODIFY",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {
          "fallbackOutput": "none"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        160,
        -448
      ],
      "id": "9d9ff385-6de7-4950-a31a-1a6166b2a8f2",
      "name": "Switch"
    },
    {
      "parameters": {
        "jsCode": "// æ›´æ–°ç‰ˆï¼šåˆ¤æ–·æ„åœ–ç¯€é» - æ”¯æ´ FLEX å¡ç‰‡ postback äº‹ä»¶\n// ä½œè€…ï¼šNick Changï½œnickleo051216@gmail.comï½œ0932-684-051\n// å€‹äººç¶²ç«™ï¼šZN Studioï½œhttps://portaly.cc/zn.studio\n// Threadsï¼šZN Studio (@nickai216)ï½œhttps://www.threads.com/@nickai216\n\nconsole.log('ğŸš€ é–‹å§‹è™•ç†LINEäº‹ä»¶...');\n\n// å–å¾—LINEäº‹ä»¶è³‡æ–™\nconst webhookData = $input.first().json;\nconst lineEvent = webhookData.body?.events?.[0];\n\nif (!lineEvent) {\n  console.log('âŒ éŒ¯èª¤ï¼šç„¡æ•ˆçš„LINEäº‹ä»¶');\n  return [{ json: { error: 'ç„¡æ•ˆçš„LINEäº‹ä»¶' } }];\n}\n\nconst userId = lineEvent.source.userId;\nconst replyToken = lineEvent.replyToken;\nlet action = 'MODIFY';  // é è¨­ç‚ºä¿®æ”¹\nlet suggestion = '';\nlet originalMessage = '';\n\n// ğŸ¯ è™•ç†ä¸åŒé¡å‹çš„LINEäº‹ä»¶\nif (lineEvent.type === 'postback') {\n  // ğŸ“± è™•ç† FLEX å¡ç‰‡çš„ postback äº‹ä»¶\n  const postbackData = lineEvent.postback.data;\n  originalMessage = lineEvent.postback.displayText || '';\n  \n  console.log('ğŸ“± æ”¶åˆ° postback äº‹ä»¶:', postbackData);\n  \n  // è§£æ postback æ•¸æ“š (æ ¼å¼: action=PUBLISH)\n  const actionMatch = postbackData.match(/action=([A-Z_]+)/);\n  if (actionMatch) {\n    const buttonAction = actionMatch[1];\n    \n    switch(buttonAction) {\n      case 'PUBLISH':\n        action = 'PUBLISH';\n        console.log('âœ… ç”¨æˆ¶é»æ“Šï¼šç«‹å³ç™¼å¸ƒ');\n        break;\n      case 'REGENERATE':\n        action = 'MODIFY';  // é‡æ–°ç”Ÿæˆä¹Ÿæ­¸é¡ç‚ºä¿®æ”¹æµç¨‹\n        suggestion = 'é‡æ–°ç”Ÿæˆ';\n        console.log('ğŸ”„ ç”¨æˆ¶é»æ“Šï¼šé‡æ–°ç”Ÿæˆ');\n        break;\n      case 'MODIFY':\n        action = 'MODIFY';\n        suggestion = 'é€²å…¥ä¿®æ”¹æ¨¡å¼';\n        console.log('ğŸ“ ç”¨æˆ¶é»æ“Šï¼šæˆ‘è¦ä¿®æ”¹');\n        break;\n      default:\n        console.log('â“ æœªçŸ¥çš„ postback å‹•ä½œ:', buttonAction);\n        action = 'MODIFY';\n    }\n  }\n  \n} else if (lineEvent.type === 'message' && lineEvent.message) {\n  // ğŸ’¬ è™•ç†å‚³çµ±æ–‡å­—è¨Šæ¯\n  const userMessage = lineEvent.message.text || '';\n  const cleanMessage = userMessage.trim();\n  originalMessage = cleanMessage;\n  \n  console.log('ğŸ’¬ æ”¶åˆ°æ–‡å­—è¨Šæ¯:', userMessage);\n  \n  // ğŸ” æ™ºèƒ½åˆ¤æ–·ç”¨æˆ¶æ„åœ–\n  if (cleanMessage.startsWith('ä¿®æ”¹ï¼š') || cleanMessage.startsWith('å»ºè­°ï¼š')) {\n    action = 'MODIFY';\n    suggestion = cleanMessage.replace(/^(ä¿®æ”¹ï¼š|å»ºè­°ï¼š)/, '').trim();\n    console.log('ğŸ“ è¾¨è­˜ç‚ºä¿®æ”¹å‹•ä½œï¼Œå»ºè­°:', suggestion);\n    \n  } else {\n    // æª¢æŸ¥ç™¼å¸ƒé—œéµå­—\n    const publishKeywords = ['ç™¼å¸ƒ', 'OK', 'Yes', 'ç¢ºå®š', 'åŒæ„', 'ç™¼è¡¨', 'publish'];\n    const regenerateKeywords = ['é‡æ–°ç”Ÿæˆ', 'å†ä¾†ä¸€æ¬¡', 'é‡æ–°ä¾†', 'regenerate', 'é‡åš'];\n    \n    if (publishKeywords.some(keyword => \n      cleanMessage.toLowerCase().includes(keyword.toLowerCase()))) {\n      action = 'PUBLISH';\n      console.log('âœ… è¾¨è­˜ç‚ºç™¼å¸ƒå‹•ä½œ');\n      \n    } else if (regenerateKeywords.some(keyword => \n      cleanMessage.toLowerCase().includes(keyword.toLowerCase()))) {\n      action = 'MODIFY';  // é‡æ–°ç”Ÿæˆä¹Ÿæ­¸é¡ç‚ºä¿®æ”¹æµç¨‹\n      suggestion = 'é‡æ–°ç”Ÿæˆ';\n      console.log('ğŸ”„ è¾¨è­˜ç‚ºé‡æ–°ç”Ÿæˆå‹•ä½œ');\n      \n    } else {\n      action = 'MODIFY';\n      suggestion = cleanMessage;\n      console.log('ğŸ“ è¾¨è­˜ç‚ºä¿®æ”¹å‹•ä½œï¼Œå»ºè­°:', suggestion);\n    }\n  }\n} else {\n  console.log('â“ æœªçŸ¥çš„äº‹ä»¶é¡å‹:', lineEvent.type);\n  action = 'MODIFY';\n}\n\n// ğŸ¯ å»ºç«‹çµ±ä¸€çš„å›æ‡‰æ ¼å¼ï¼ˆåªæœ‰å…©ç¨®è·¯ç·šï¼šPUBLISH æˆ– MODIFYï¼‰\nconst result = {\n  action: action,              // åªæœƒæ˜¯ 'PUBLISH' æˆ– 'MODIFY'\n  suggestion: suggestion,      // ä¿®æ”¹å»ºè­°æˆ–å‹•ä½œé¡å‹\n  userId: userId,\n  originalMessage: originalMessage,\n  timestamp: new Date().toISOString(),\n  replyToken: replyToken,\n  eventType: lineEvent.type,\n  // é™¤éŒ¯è³‡è¨Š\n  debug: {\n    eventType: lineEvent.type,\n    hasPostback: !!lineEvent.postback,\n    hasMessage: !!lineEvent.message,\n    postbackData: lineEvent.postback?.data || null,\n    processedAs: action === 'PUBLISH' ? 'ç™¼å¸ƒæµç¨‹' : 'ä¿®æ”¹/é‡æ–°ç”Ÿæˆæµç¨‹'\n  }\n};\n\nconsole.log('âœ¨ è™•ç†å®Œæˆï¼Œèµ°å‘:', result.debug.processedAs);\nconsole.log('ğŸ“‹ å®Œæ•´çµæœ:', JSON.stringify(result, null, 2));\n\nreturn [{ json: result }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -64,
        -448
      ],
      "id": "9b64fcdc-11e1-4eb3-bed6-a4a7d9b6d67d",
      "name": "åˆ¤æ–·æ„åœ–"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/broadcast",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\":\"ä»Šæ—¥æ–‡ç«  {{ $('å–å¾—é€£çµ').item.json.permalink }}  å·²ç™¼å¸ƒ\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2800,
        -640
      ],
      "id": "829393ee-8c26-4980-80bf-33840593500f",
      "name": "é€šçŸ¥å·²ç™¼é€",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 719822527,
          "mode": "list",
          "cachedResultName": "AIPOST TRY",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=719822527"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Content": "={{ $json.choices[0].message.content }}",
            "Status": "DRAFT",
            "GeneratedTime": "={{ $now }}",
            "Version": "1",
            "UserAction": "åˆå§‹ç”Ÿæˆ",
            "IsLatest": "TRUE",
            "PostDate": "={{ $now.format('DD') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "GeneratedTime",
              "displayName": "GeneratedTime",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Version",
              "displayName": "Version",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "UserAction",
              "displayName": "UserAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "IsLatest",
              "displayName": "IsLatest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "PostDate",
              "displayName": "PostDate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        320,
        -1216
      ],
      "id": "f9cc47ff-1440-4905-90d1-20320de50b90",
      "name": "AIPOST TRY  æ–°å¢è‰ç¨¿",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 719822527,
          "mode": "list",
          "cachedResultName": "AIPOST TRY",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=719822527"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "IsLatest",
              "lookupValue": "TRUE"
            },
            {
              "lookupColumn": "PostDate",
              "lookupValue": "={{ $now.format('DD') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        384,
        -336
      ],
      "id": "62043ab4-2757-4e9a-a404-2443b618895c",
      "name": "å–å¾—æœ€æ–°ç‰ˆæœ¬",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=ä½ æ˜¯å°ˆæ¥­çš„ç¤¾ç¾¤å…§å®¹å‰µä½œè€…ã€‚è«‹æ ¹æ“šä»¥ä¸‹æŒ‡ç¤ºä¿®æ”¹å…§å®¹ï¼š\n\nåŸå§‹å…§å®¹ï¼š\n{{ $('å–å¾—æœ€æ–°ç‰ˆæœ¬').item.json.Content }}\n\nä¿®æ”¹è¦æ±‚ï¼š\n{{ $('åˆ¤æ–·æ„åœ–').item.json.suggestion }}\n\nä½ æœ‰ Toolï¼šMessage a model in Perplexity1\n\nå¯ä»¥ä½¿ç”¨ é€²è¡Œæœå°‹æœ€æ–°æ¶ˆæ¯ä¸¦ä¿®æ”¹\n\nè«‹ä¿æŒä»¥ä¸‹æ ¼å¼è¦æ±‚ï¼š\n- å­—æ•¸ï¼š100-200å­—\n- ä½¿ç”¨é©ç•¶æ›è¡Œè®“å…§å®¹æ˜“è®€\n- æ¯è¡Œä¸è¶…é30å­—\n- emojié©åº¦ä½¿ç”¨\n- hashtagä¸ç”¨æ”¾\n- èªæ°£é¢¨æ ¼è¦ç¬¦åˆiPASæ‡‰ç”¨è¦åŠƒå¸«çš„å°ˆæ¥­å½¢è±¡\n\nè«‹åªå›å‚³ä¿®æ”¹å¾Œçš„å…§å®¹ï¼Œä¸è¦é¡å¤–èªªæ˜ã€‚\n\n\n\nä½ æ˜¯å°ˆæ¥­çš„ç¤¾ç¾¤å…§å®¹å‰µä½œè€…ï¼Œè«‹ç”Ÿæˆæœ‰è¶£çš„ç¹é«”ä¸­æ–‡Threadsè²¼æ–‡ã€‚\n\nç™¼æ–‡å…§å®¹ç‚º n8n æ•™å­¸ç›¸é—œæ¶ˆæ¯æ›´æ–°ï¼Œ n8n ç›¸é—œçŸ¥è­˜ æˆ–æ˜¯AIç§‘æŠ€ ç”Ÿæˆå¼AIã€AIå·¥å…·æ‡‰ç”¨(n8n, LineBot, apps script, claude, gemini...)ç­‰ä»‹ç´¹åˆ†äº«\n\n\n\n| èªæ°£é¢¨æ ¼     | ç™¼æ–‡èªæ°£èªªæ˜                                                                 |\n|--------------|------------------------------------------------------------------------------|\n| ğŸš€ ç†±è¡€å…±å­¸é¢¨ | ä»¥ã€Œæ­£åœ¨åŠªåŠ›ä¸­çš„ n8n å­¸ç¿’è€…ã€èªæ°£ï¼Œåˆ†äº«å­¸ç¿’ç›®æ¨™ã€æŒ‘æˆ°æˆ–ç·´ç¿’ä¸»é¡Œï¼Œæ¿€å‹µè‡ªå·±ä¹Ÿé¼“èˆåˆ¥äººã€‚        |\n| ğŸ¯ å°ˆæ¥­ç§‘æ™®é¢¨ | ç”¨ã€Œæ‡‚æŠ€è¡“ä½†æœƒè¬›äººè©±ã€çš„èªæ°£ï¼Œç°¡å–®æ¸…æ¥šè§£é‡‹ AIã€iPAS æˆ–ç”Ÿæˆå¼æŠ€è¡“è§€å¿µï¼Œå¹«åŠ©è®€è€…ç†è§£ã€‚        |\n| ğŸ› ï¸ å¯¦ä½œæ•™å­¸é¢¨ | ç”¨ã€Œæœ‰åšéã€ä¾†åˆ†äº«çµ¦å¤§å®¶ã€çš„èªæ°£ï¼Œæ¢ç†æ¸…æ¥šä»‹ç´¹ä½ çš„è‡ªå‹•åŒ–æ•´åˆæµç¨‹æˆ–å¯¦ä½œç¶“é©—ã€‚                |\n| ğŸ“– å‚™è€ƒæ—¥è¨˜é¢¨ | ä»¥ã€Œä»Šå¤©å­¸äº†ä»€éº¼ã€çš„èªæ°£è¨˜éŒ„ iPAS å‚™è€ƒé€²åº¦èˆ‡å¿ƒå¾—ï¼Œèªæ°£è‡ªç„¶å¯è¦ªï¼Œåƒåœ¨å¯«æ—¥è¨˜ä¸€æ¨£ã€‚            |\n| ğŸŒ è¶¨å‹¢æ´å¯Ÿé¢¨ | ç”¨ã€Œæœªä¾†é¡§å•ã€çš„èªæ°£æå‡º AI åœ¨ç”¢æ¥­ã€è·å ´çš„è§€å¯Ÿæˆ–è¦‹è§£ï¼Œèªæ°£æ²‰ç©©ï¼Œå¯é™„æå•é¼“å‹µæ€è€ƒã€‚        |\n| ğŸŒ¿ è¼•é¬†ç”Ÿæ´»é¢¨ | ç”¨ã€Œæœ‹å‹èŠå¤©ã€çš„èªæ°£ï¼Œåˆ†äº«æ—¥å¸¸è¶£äº‹ã€ç”Ÿæ´»è§€å¯Ÿï¼Œè¼•é¬†è‡ªç„¶ï¼Œé¿å…å¤ªå¤šå°ˆæ¥­è©å½™ã€‚                |\n| ğŸ§˜ ç¸½çµåæ€é¢¨ | ä»¥ã€Œä¸€é€±å›é¡§ã€çš„èªæ°£ç¸½çµé€²åº¦ã€å¿ƒå¾—ï¼Œä¸¦è¦åŠƒä¸‹é€±ï¼Œèªæ°£ç©©é‡ã€æœ‰æ¢ç†ï¼Œå‘ˆç¾æŒçºŒæˆé•·æ„Ÿã€‚         |\n\nèªæ°£éš¨æ©Ÿç”¨ä¸€ç¨®\n\nğŸš€ã€iPASæ‡‰ç”¨è¦åŠƒå¸«æ¯æ—¥æŒ‘æˆ°ã€‘ ğŸš€ã€iPASæ‡‰ç”¨è¦åŠƒå¸«æ¯æ—¥æŒ‘æˆ°ã€‘ Day {{ Math.floor((new Date() - new Date('2025-06-20')) / (1000 * 60 * 60 * 24)) + 1 }}  \n**æ ¼å¼è¦æ±‚ï¼š**\n- å­—æ•¸ï¼š100-200å­—\n- ä½¿ç”¨é©ç•¶æ›è¡Œè®“å…§å®¹æ˜“è®€\n- æ¯è¡Œä¸è¶…é30å­—\n- emojié©åº¦ä½¿ç”¨ï¼Œä¸è¦éå¤š\n- hashtagä¸ç”¨æ”¾\n\n**è¼¸å‡ºæ ¼å¼ç¯„ä¾‹ï¼š**\nğŸŒŸ é–‹å ´å¸å¼•æ³¨æ„\n\nä¸»è¦å…§å®¹ç¬¬ä¸€æ®µ\nä¿æŒç°¡æ½”æœ‰åŠ› âœ¨\n\nå…§å®¹è±å¯Œä¸€äº›\n\näº’å‹•å•é¡Œæˆ–ç¸½çµ\né¼“å‹µå¤§å®¶ç•™è¨€è¨è«– ğŸ’¬\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        608,
        -336
      ],
      "id": "3723d2bf-381a-4e55-a7bc-a64657a6a1de",
      "name": "OpenAI1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/broadcast",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\":\"{{ $json.cleanText }}\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1200,
        -448
      ],
      "id": "cde113fe-8bf3-4388-b429-35325b64a2e9",
      "name": "ç™¼é€å›æ‡‰çµ¦ LINE1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "jsCode": "// LINE Bot æ”¯æ´æ›è¡Œçš„ Code1 ä¿®æ­£ç‰ˆ\n// ç²å–å…§å®¹\nlet generatedContent;\nif ($input.first().json.message && $input.first().json.message.content) {\n  generatedContent = $input.first().json.message.content;\n} else if ($input.first().json.Content) {\n  generatedContent = $input.first().json.Content;\n} else {\n  generatedContent = \"ç„¡æ³•å–å¾—å…§å®¹\";\n}\n\n// å»ºç«‹ LINE è¨Šæ¯æ–‡å­—ï¼ˆä¿æŒæ›è¡Œï¼‰\nconst lineText = `ğŸ¤– AI ç‚ºä½ ç”Ÿæˆäº†æ–°çš„ iPAS è²¼æ–‡ï¼š\n\n${generatedContent}\n\nğŸ“ è«‹å›è¦†ï¼š\nâœ… ã€Œç™¼å¸ƒã€æˆ–ã€ŒYesã€- ç«‹å³ç™¼å¸ƒåˆ° Threads\nğŸ”„ ã€Œé‡æ–°ç”Ÿæˆã€- ç”Ÿæˆæ–°å…§å®¹\nğŸ“ ã€Œä¿®æ”¹ï¼š[ä½ çš„å»ºè­°]ã€- æ ¹æ“šå»ºè­°èª¿æ•´å…§å®¹`;\n\n// ğŸ”¥ é—œéµï¼šæ­£ç¢ºè½‰ç¾©æ›è¡Œç¬¦è™Ÿï¼Œè®“ LINE èƒ½é¡¯ç¤ºæ›è¡Œ\nconst cleanText = lineText\n  .replace(/\\r?\\n/g, '\\\\n')      // å°‡æ›è¡Œç¬¦è™Ÿè½‰ç¾©ç‚º \\\\nï¼ˆLINE æœƒæ­£ç¢ºè§£æï¼‰\n  .replace(/\"/g, '\\\\\"')          // è½‰ç¾©é›™å¼•è™Ÿ\n  .trim();                       // å»é™¤é¦–å°¾ç©ºç™½\n\n// è¿”å›è™•ç†éçš„è³‡æ–™\nreturn [{\n  json: {\n    Content: generatedContent,\n    cleanText: cleanText,\n    Posted: \"PENDING\",\n    Status: \"WAITING_APPROVAL\",\n    Time: new Date().toISOString()\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        976,
        -448
      ],
      "id": "22730c97-df85-47ad-8bf9-584b2d4e3e86",
      "name": "Code3"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 719822527,
          "mode": "list",
          "cachedResultName": "AIPOST TRY",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=719822527"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "IsLatest": "FALSE",
            "row_number": "={{ $('å–å¾—æœ€æ–°ç‰ˆæœ¬').item.json.row_number }}",
            "Version": "=={{ $('å–å¾—æœ€æ–°ç‰ˆæœ¬').item.json.Version }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "GeneratedTime",
              "displayName": "GeneratedTime",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Version",
              "displayName": "Version",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "UserAction",
              "displayName": "UserAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "IsLatest",
              "displayName": "IsLatest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "PostDate",
              "displayName": "PostDate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        976,
        -240
      ],
      "id": "89a30de7-8fde-46fe-bb7e-98547b05e348",
      "name": "èˆŠç‰ˆæœ¬æ›´æ–°",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/chat/loading/start",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer kYRupZwyMBgGXVMGuZWbLID3MkieSHykUuIPYom1Gk21ZL1Qg+M5AZGhzP4t/h5O9AZ7PUih+JMVUbNZLbc6HWtld/eL+U6mec5WO3RIgWCoiZuocSkfdt0WolGtCmAej4ynw4FVmRPkz4FS1+bk8AdB04t89/1O/w1cDnyilFU="
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chatId",
              "value": "={{ $json.body.events[0].source.userId }}"
            },
            {
              "name": "loadingSeconds",
              "value": "40"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -64,
        -640
      ],
      "id": "64c39552-608d-4e2a-a7f0-f84ca94863f3",
      "name": "loading/start"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 719822527,
          "mode": "list",
          "cachedResultName": "AIPOST TRY",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=719822527"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "IsLatest": "=TRUE",
            "Version": "={{ $json.Version }}+1",
            "PostDate": "={{ $now.format('DD') }}",
            "Content": "={{ $('OpenAI1').item.json.message.content }}",
            "GeneratedTime": "={{ $('å–å¾—æœ€æ–°ç‰ˆæœ¬').item.json.GeneratedTime }}",
            "Status": "={{ $('å–å¾—æœ€æ–°ç‰ˆæœ¬').item.json.Status }}",
            "UserAction": "=ä¿®æ­£ç‰ˆ"
          },
          "matchingColumns": [
            "IsLatest"
          ],
          "schema": [
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "GeneratedTime",
              "displayName": "GeneratedTime",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Version",
              "displayName": "Version",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "UserAction",
              "displayName": "UserAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "IsLatest",
              "displayName": "IsLatest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "PostDate",
              "displayName": "PostDate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        1200,
        -240
      ],
      "id": "952118ed-5d6d-4c4f-94a6-2dff5bd41f77",
      "name": "æ–°å¢æ–°ç‰ˆæœ¬",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 719822527,
          "mode": "list",
          "cachedResultName": "AIPOST TRY",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=719822527"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "IsLatest",
              "lookupValue": "TRUE"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        384,
        -640
      ],
      "id": "1ef4e925-d34a-4090-91d9-138977139ea9",
      "name": "å–å¾—æœ€æ–°è‰ç¨¿",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "threads-post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Posted": "FALSE",
            "Content": "={{ $json.Content }}",
            "Time": "={{ $json.GeneratedTime }}"
          },
          "matchingColumns": [
            "Posted"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Image",
              "displayName": "Image",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Tag",
              "displayName": "Tag",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Posted",
              "displayName": "Posted",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ContainerId",
              "displayName": "ContainerId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Time",
              "displayName": "Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        672,
        -640
      ],
      "id": "9505c9ae-5044-449a-bd64-8434bbc229df",
      "name": "Update row in sheet",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "threads-post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Content": "={{ $('Message a model').item.json.message.content }}",
            "Posted": "FALSE",
            "Time": "={{ $now }}"
          },
          "matchingColumns": [
            "Posted"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Content",
              "displayName": "Content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Image",
              "displayName": "Image",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Tag",
              "displayName": "Tag",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Posted",
              "displayName": "Posted",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ContainerId",
              "displayName": "ContainerId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Time",
              "displayName": "Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "PublishPostId",
              "displayName": "PublishPostId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        656,
        -928
      ],
      "id": "a1dd629f-6291-40e2-a064-e7be60bc363b",
      "name": "Update row in threads-post",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "messages": {
          "message": [
            {
              "content": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message0_Text', ``, 'string') }}"
            }
          ]
        },
        "options": {},
        "requestOptions": {}
      },
      "type": "n8n-nodes-base.perplexityTool",
      "typeVersion": 1,
      "position": [
        32,
        -992
      ],
      "id": "b4398ad4-1ca2-41e5-983b-1dc2f36c0224",
      "name": "Message a model in Perplexity",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "GPT-4.1"
        },
        "messages": {
          "values": [
            {
              "content": "=ä½ æ˜¯å°ˆæ¥­çš„ç¤¾ç¾¤å…§å®¹å‰µä½œè€…ï¼Œè«‹ç”Ÿæˆæœ‰è¶£çš„ç¹é«”ä¸­æ–‡Threadsè²¼æ–‡ã€‚\nç”Ÿæ´»åŒ–ä¸€é» (ä¾‹å¦‚å¹³å¸¸ç”Ÿæ´»ä¸­å¸¸å¸¸ç”¨åˆ°çš„ AI n8n  å°ˆæ¥­çŸ¥è­˜)\nç™¼æ–‡å…§å®¹ç‚º ä»»ä½•è·æ¥­ä½¿ç”¨ å¯ä»¥æ€éº¼ä½¿ç”¨ n8n AIï¼Œç”¨åˆ°æ€éº¼æ¨£çš„æƒ…æ³è¦ç”¨å“ªç¨® n8n AIï¼Œ\n\n(å¯ä»¥å¼•ç”¨ æˆ–æ˜¯{{ $today }}n8n ç›¸é—œæ›´æ–°æˆ–æ˜¯å·¥ä½œæµ n8n AIå·¥å…·æ‡‰ç”¨(n8n, claude, GPT, gemini, apps script...)ç­‰ä»‹ç´¹åˆ†äº«)\n\nä½ æœ‰ å·¥å…· \n\"Message a model in Perplexity\"\n\nè«‹å”åŠ©ä¸Šç¶²æœå°‹   {{ $today }} æœ€æ–°çš„AIæ–°è\nä¸¦çµåˆå…§æ–‡ç”Ÿæˆå…§å®¹  ä»»ä½•è·æ¥­ä½¿ç”¨ å¯ä»¥æ€éº¼ä½¿ç”¨ n8n AIï¼Œç”¨åˆ°æ€éº¼æ¨£çš„æƒ…æ³è¦ç”¨å“ªç¨®n8n å·¥ä½œæµ\n\n\n| èªæ°£é¢¨æ ¼     | ç™¼æ–‡èªæ°£èªªæ˜                                                                 |\n|--------------|------------------------------------------------------------------------------|\n| ğŸš€ ç†±è¡€å…±å­¸é¢¨ | ä»¥ã€Œæ­£åœ¨åŠªåŠ›ä¸­çš„ AI å­¸ç¿’è€…ã€èªæ°£ï¼Œåˆ†äº«å­¸ç¿’ç›®æ¨™ã€æŒ‘æˆ°æˆ–ç·´ç¿’ä¸»é¡Œï¼Œæ¿€å‹µè‡ªå·±ä¹Ÿé¼“èˆåˆ¥äººã€‚        |\n| ğŸ¯ å°ˆæ¥­ç§‘æ™®é¢¨ | ç”¨ã€Œæ‡‚æŠ€è¡“ä½†æœƒè¬›äººè©±ã€çš„èªæ°£ï¼Œç°¡å–®æ¸…æ¥šè§£é‡‹ AIã€iPAS æˆ–ç”Ÿæˆå¼æŠ€è¡“è§€å¿µï¼Œå¹«åŠ©è®€è€…ç†è§£ã€‚        |\n| ğŸ› ï¸ å¯¦ä½œæ•™å­¸é¢¨ | ç”¨ã€Œæœ‰åšéã€ä¾†åˆ†äº«çµ¦å¤§å®¶ã€çš„èªæ°£ï¼Œæ¢ç†æ¸…æ¥šä»‹ç´¹ä½ çš„è‡ªå‹•åŒ–æ•´åˆæµç¨‹æˆ–å¯¦ä½œç¶“é©—ã€‚                |\n| ğŸ“– å‚™è€ƒæ—¥è¨˜é¢¨ | ä»¥ã€Œä»Šå¤©å­¸äº†ä»€éº¼ã€çš„èªæ°£è¨˜éŒ„ iPAS å‚™è€ƒé€²åº¦èˆ‡å¿ƒå¾—ï¼Œèªæ°£è‡ªç„¶å¯è¦ªï¼Œåƒåœ¨å¯«æ—¥è¨˜ä¸€æ¨£ã€‚            |\n| ğŸŒ è¶¨å‹¢æ´å¯Ÿé¢¨ | ç”¨ã€Œæœªä¾†é¡§å•ã€çš„èªæ°£æå‡º AI åœ¨ç”¢æ¥­ã€è·å ´çš„è§€å¯Ÿæˆ–è¦‹è§£ï¼Œèªæ°£æ²‰ç©©ï¼Œå¯é™„æå•é¼“å‹µæ€è€ƒã€‚        |\n| ğŸŒ¿ è¼•é¬†ç”Ÿæ´»é¢¨ | ç”¨ã€Œæœ‹å‹èŠå¤©ã€çš„èªæ°£ï¼Œåˆ†äº«æ—¥å¸¸è¶£äº‹ã€ç”Ÿæ´»è§€å¯Ÿï¼Œè¼•é¬†è‡ªç„¶ï¼Œé¿å…å¤ªå¤šå°ˆæ¥­è©å½™ã€‚                |\n| ğŸ§˜ ç¸½çµåæ€é¢¨ | ä»¥ã€Œä¸€é€±å›é¡§ã€çš„èªæ°£ç¸½çµé€²åº¦ã€å¿ƒå¾—ï¼Œä¸¦è¦åŠƒä¸‹é€±ï¼Œèªæ°£ç©©é‡ã€æœ‰æ¢ç†ï¼Œå‘ˆç¾æŒçºŒæˆé•·æ„Ÿã€‚         |\n\nä»¥ä¸Šèªæ°£éš¨æ©Ÿç”¨ä¸€ç¨®\n\næ¨™é¡Œç”¨ï¼š\nğŸš€ã€iPASæ‡‰ç”¨è¦åŠƒå¸«æ¯æ—¥æŒ‘æˆ°ã€‘ Day {{ Math.floor((new Date() - new Date('2025-06-20')) / (1000 * 60 * 60 * 24)) + 1 }}\n**æ ¼å¼è¦æ±‚ï¼š**\n- å­—æ•¸ï¼š100-250å­—\n- ä½¿ç”¨é©ç•¶æ›è¡Œè®“å…§å®¹æ˜“è®€\n- æ¯è¡Œä¸è¶…é30å­—\n- emojié©åº¦ä½¿ç”¨ï¼Œä¸è¦éå¤š\n- hashtag ä¸ç”¨æ”¾\n\n**è¼¸å‡ºæ ¼å¼ç¯„ä¾‹ï¼š**\nğŸŒŸ é–‹å ´å¸å¼•æ³¨æ„\n\nä¸»è¦å…§å®¹ç¬¬ä¸€æ®µ\nä¿æŒç°¡æ½”æœ‰åŠ› âœ¨\n\nå…§å®¹ä»¥ å°ˆæ¥­çŸ¥è­˜ç‚ºä¸» è±å¯Œä¸€äº›\n\näº’å‹•å•é¡Œæˆ–ç¸½çµ\né¼“å‹µå¤§å®¶ç•™è¨€è¨è«– ğŸ’¬\nä¸ç”¨æ”¾æ¨™ç±¤\n\nä½ æœ‰ å·¥å…· \n\"Message a model in Perplexity\"\n\nè«‹å”åŠ©ä¸Šç¶²æœå°‹æœ€æ–°çš„AIæ–°è(Claude æ›´æ–° GPT æ›´æ–° Gemini æ›´æ–° ç­‰AIå·¥å…·çš„æ›´æ–°)\nä¸¦çµåˆå…§æ–‡ç”Ÿæˆå…§å®¹\n"
            }
          ]
        },
        "simplify": false,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -64,
        -1200
      ],
      "id": "595cf475-d567-4108-870a-710ad0422d45",
      "name": "Message a model",
      "retryOnFail": true,
      "credentials": "[REMOVED]",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E",
          "mode": "list",
          "cachedResultName": "Nick_n8n_demo ",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1778932180,
          "mode": "list",
          "cachedResultName": "è‡ªå‹•æ›´æ–°æ¬Šæ–",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1N2VDbZHjGZbTiT_qyXIAJjLw0pn5B-fOyxVIsoZXl9E/edit#gid=1778932180"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1488,
        -640
      ],
      "id": "da50d11f-d2cc-41b7-823f-1a68c5e09d7c",
      "name": "get threads new token",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "messages": {
          "message": [
            {
              "content": "=ä¿®æ”¹è¦æ±‚ï¼š\n{{ $('åˆ¤æ–·æ„åœ–').item.json.suggestion }}"
            }
          ]
        },
        "options": {},
        "requestOptions": {}
      },
      "type": "n8n-nodes-base.perplexityTool",
      "typeVersion": 1,
      "position": [
        656,
        -112
      ],
      "id": "f6d1cec0-b6b0-4cf0-9daf-5081bcd911c9",
      "name": "Message a model in Perplexity1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/broadcast",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"æ­¤æ¬¡AIç™¼æ–‡ ç™¼ç”ŸéŒ¯èª¤\"\n    }]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        320,
        -1008
      ],
      "id": "384da052-35c9-403d-bc74-de146bab53cd",
      "name": "ç™¼é€å›æ‡‰çµ¦ LINE2",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2480,
        -400
      ],
      "id": "f12cada5-5c12-4a12-8d7b-c4b1736b5011",
      "name": "Wait",
      "webhookId": "[REMOVED]"
    },
    {
      "parameters": {
        "url": "=https://graph.threads.net/v1.0/{{ $json.id }}?fields=permalink",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $('get threads new token').item.json.token }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2288,
        -480
      ],
      "id": "c25b8f4e-4f2c-44c9-ab40-cb8134f98008",
      "name": "å–å¾—é€£çµ",
      "executeOnce": true,
      "retryOnFail": true,
      "onError": "continueErrorOutput"
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "InsertContainerId": {
      "main": [
        [
          {
            "node": "PublishPost",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "PublishPost": {
      "main": [
        [
          {
            "node": "å–å¾—é€£çµ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CreatePostContainer": {
      "main": [
        [
          {
            "node": "InsertContainerId",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetAllPost": {
      "main": [
        [
          {
            "node": "GetLastestUnpublish",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GetLastestUnpublish": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "get threads new token",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdatePostStatus1": {
      "main": [
        [
          {
            "node": "é€šçŸ¥å·²ç™¼é€",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "ç™¼é€å›æ‡‰çµ¦ LINE",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "åˆ¤æ–·æ„åœ–",
            "type": "main",
            "index": 0
          },
          {
            "node": "loading/start",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ¤æ–·æ„åœ–": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "å–å¾—æœ€æ–°è‰ç¨¿",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "å–å¾—æœ€æ–°ç‰ˆæœ¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç™¼é€å›æ‡‰çµ¦ LINE": {
      "main": [
        []
      ]
    },
    "AIPOST TRY  æ–°å¢è‰ç¨¿": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Update row in threads-post",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å–å¾—æœ€æ–°ç‰ˆæœ¬": {
      "main": [
        [
          {
            "node": "OpenAI1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code3": {
      "main": [
        [
          {
            "node": "ç™¼é€å›æ‡‰çµ¦ LINE1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI1": {
      "main": [
        [
          {
            "node": "Code3",
            "type": "main",
            "index": 0
          },
          {
            "node": "èˆŠç‰ˆæœ¬æ›´æ–°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èˆŠç‰ˆæœ¬æ›´æ–°": {
      "main": [
        [
          {
            "node": "æ–°å¢æ–°ç‰ˆæœ¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ–°å¢æ–°ç‰ˆæœ¬": {
      "main": [
        []
      ]
    },
    "å–å¾—æœ€æ–°è‰ç¨¿": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet": {
      "main": [
        [
          {
            "node": "GetAllPost",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in threads-post": {
      "main": [
        []
      ]
    },
    "Message a model in Perplexity": {
      "ai_tool": [
        [
          {
            "node": "Message a model",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "AIPOST TRY  æ–°å¢è‰ç¨¿",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ç™¼é€å›æ‡‰çµ¦ LINE2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get threads new token": {
      "main": [
        [
          {
            "node": "CreatePostContainer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model in Perplexity1": {
      "ai_tool": [
        [
          {
            "node": "OpenAI1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "å–å¾—é€£çµ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å–å¾—é€£çµ": {
      "main": [
        [
          {
            "node": "UpdatePostStatus1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": []
    }
  },
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "b39ed1f6-63ff-4add-9aff-b0fdfaf372a3",
  "triggerCount": 2,
  "shared": [
    {
      "updatedAt": "2025-06-17T16:11:28.345Z",
      "createdAt": "2025-06-17T16:11:28.345Z",
      "role": "workflow:owner",
      "workflowId": "S4DLz2IyXi3th9RZ",
      "projectId": "4W71QCd0cKKsiKSS"
    }
  ],
  "tags": [
    {
      "updatedAt": "2025-08-24T17:31:32.101Z",
      "createdAt": "2025-08-24T17:31:32.101Z",
      "id": "NdMmboef1PsJUri9",
      "name": "Meta"
    },
    {
      "updatedAt": "2025-08-24T17:32:57.694Z",
      "createdAt": "2025-08-24T17:32:57.694Z",
      "id": "E9OvZU03hNYmh0w5",
      "name": "ç™¼æ–‡"
    },
    {
      "updatedAt": "2025-08-24T17:33:21.949Z",
      "createdAt": "2025-08-24T17:33:21.949Z",
      "id": "D2tHhJwBo05gqGYr",
      "name": "Line"
    }
  ]
}