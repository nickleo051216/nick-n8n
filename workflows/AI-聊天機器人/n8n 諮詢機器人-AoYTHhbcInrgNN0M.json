{
  "updatedAt": "2025-12-14T05:33:06.200Z",
  "createdAt": "2025-05-06T16:45:09.836Z",
  "id": "AoYTHhbcInrgNN0M",
  "name": "n8n è«®è©¢æ©Ÿå™¨äºº",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.body.events[0].source.userId }}",
        "contextWindowLength": 10
      },
      "id": "3aaf1c1c-f877-46f0-b65a-10d363e1c54b",
      "name": "Simple Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        -112,
        320
      ],
      "typeVersion": 1.3
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.body.events[0].message.text }}",
        "options": {
          "systemMessage": "You are a n8n helpful assistant\n\n\nå¾ˆç­è§£ n8n æ•´å€‹é‹ä½œæµç¨‹\néƒ¨å±¬åœ¨ Zeabur \n\nå›æ‡‰æ™‚ï¼Œè«‹éš¨æ™‚æ³¨æ„ä»¥ä¸‹æ ¼å¼ï¼š\nconst safeLineMessage = lineMessage\n  .replace(/\\\\/g, '\\\\\\\\')   // åæ–œç·šè¦å…ˆè™•ç†\n  .replace(/\"/g, '\\\\\"')     // é›™å¼•è™Ÿè½‰ç¾©ï¼ˆé—œéµå•é¡Œï¼ï¼‰\n  .replace(/\\n/g, '\\\\n')    // æ›è¡Œç¬¦è½‰ç¾©\n  .replace(/\\r/g, '\\\\r')    // å›è»Šç¬¦è½‰ç¾©  \n  .replace(/\\t/g, '\\\\t');   // Tabç¬¦è½‰ç¾©"
        }
      },
      "id": "24f73aab-fbde-4e44-b03b-6d04c680091e",
      "name": "AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        -240,
        96
      ],
      "typeVersion": 1.8
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "n8n-CRM",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -688,
        96
      ],
      "id": "d1fd5438-d50d-492e-928d-4d6a9b1d8cc9",
      "name": "Webhook",
      "webhookId": "[REMOVED]",
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -240,
        320
      ],
      "id": "f0370028-21ec-45ae-b614-1a359b33abae",
      "name": "OpenRouter Chat Model",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.line.me/v2/bot/message/push",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer vs/hts0osMsRupRb/SPUQkBKMRLClo5PzDCemrNiP6xbXrDwwaKRyI7c0+qg7nlsBvhE2Qcp7uAgXhkEt88TIgHYGk8/RwqyfOPwAZ3wKgLzlzBCamFZOAHGn23Mnf7EQSzXoeJtXNyMjHLQfY9EFAdB04t89/1O/w1cDnyilFU="
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"to\": \"{{ $('Webhook').item.json.body.events[0].source.userId }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"{{ $json.output }}\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        112,
        96
      ],
      "id": "d4cff3c7-0842-49e9-a9c1-1577dfc05d76",
      "name": "å›è¦† Line è¨Šæ¯é€šçŸ¥",
      "notes": "å‘ŠçŸ¥ç”¨æˆ¶å·²æ”¶åˆ°å½±ç‰‡ä¸¦é–‹å§‹è™•ç†"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "2acfc8c6-09e9-4d83-aaaf-3a1c06f33d7c",
              "leftValue": "={{ $json.body.events[0].message.text }}",
              "rightValue": "@AI",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -464,
        96
      ],
      "id": "31f1576f-8833-4b86-9ec5-cb44dbe58327",
      "name": "If"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/chat/loading/start",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "loadingSeconds",
              "value": "40"
            },
            {
              "name": "chatId",
              "value": "={{ $json.body.events[0].source.userId }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -464,
        -96
      ],
      "id": "11c6187f-5768-4f30-8376-8863c9e547b9",
      "name": "loading/start",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.line.me/v2/bot/message/push",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer vs/hts0osMsRupRb/SPUQkBKMRLClo5PzDCemrNiP6xbXrDwwaKRyI7c0+qg7nlsBvhE2Qcp7uAgXhkEt88TIgHYGk8/RwqyfOPwAZ3wKgLzlzBCamFZOAHGn23Mnf7EQSzXoeJtXNyMjHLQfY9EFAdB04t89/1O/w1cDnyilFU="
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"to\": \"{{ $('Webhook').item.json.body.events[0].source.userId }}\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"æ‚¨å¥½ï¼å¦‚éœ€çœŸäººå›å¾©è«‹ç¨ç­‰ï¼Œå¦‚æƒ³è©¢å• n8n ç›¸é—œè³‡è¨Šï¼Œè«‹è¼¸å…¥ @AI \"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -688,
        -544
      ],
      "id": "ad4eb627-0a3b-4296-b6dc-f6fb6ee8830c",
      "name": "å›è¦† Line è¨Šæ¯é€šçŸ¥1",
      "notes": "å‘ŠçŸ¥ç”¨æˆ¶å·²æ”¶åˆ°å½±ç‰‡ä¸¦é–‹å§‹è™•ç†"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.events[0].message.text }}",
                    "rightValue": "ZN",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1d49dbeb-4ed5-4bf3-b5bd-1b3ce5b27346"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "åŒ¯æ¬¾å¾Œäº”ç¢¼ "
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -464,
        288
      ],
      "id": "32c9315b-a8f9-465a-8e5d-4a68d3072c00",
      "name": "Switch"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "condition_1",
                    "leftValue": "={{ $('åˆ†æè¨Šæ¯å…§å®¹').item.json.bankLast5 }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "æœ‰å¾Œäº”ç¢¼ (æ›´æ–°åŒ¯æ¬¾)"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "condition_2",
                    "leftValue": "={{ $json['ä»˜æ¬¾ç‹€æ…‹'] }}",
                    "rightValue": "å·²ä»˜æ¬¾",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "å·²ä»˜æ¬¾ (çµ¦ç¾¤çµ„é€£çµ)"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3,
      "position": [
        -688,
        512
      ],
      "id": "a95250f3-dbb9-4777-b715-ad2cc5f9dd06",
      "name": "åˆ¤æ–·æƒ…å¢ƒ (Switch)"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "n8n-CRM",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -688,
        1280
      ],
      "id": "1cd1ccb4-f59d-4dee-9d3d-41188a56983e",
      "name": "æ¥æ”¶ Line è¨Šæ¯",
      "webhookId": "[REMOVED]"
    },
    {
      "parameters": {
        "jsCode": "// å–å¾—ä½¿ç”¨è€…å‚³ä¾†çš„æ–‡å­—\nconst userMessage = $input.item.json.body.events[0].message.text || '';\nconst replyToken = $input.item.json.body.events[0].replyToken;\nconst userId = $input.item.json.body.events[0].source.userId;\n\n// 1. æŠ“å– ZN è¨‚å–®ç·¨è™Ÿ (ZN + 13ä½æ•¸å­—)\n// ä¾‹å¦‚ï¼šZN1733246789456\nconst znRegex = /(ZN\\d{13})/i;\nconst znMatch = userMessage.match(znRegex);\nconst orderId = znMatch ? znMatch[1].toUpperCase() : null;\n\n// 2. æŠ“å– å¾Œäº”ç¢¼ (é€£çºŒ 5 ä½æ•¸å­—ï¼Œä¸”ä¸æ˜¯ ZN ç·¨è™Ÿçš„ä¸€éƒ¨åˆ†)\n// é€™è£¡ç”¨æ¯”è¼ƒç°¡å–®çš„é‚è¼¯ï¼šå¦‚æœå­—ä¸²ä¸­æœ‰ç¨ç«‹çš„ 5 ç¢¼æ•¸å­—\nconst last5Regex = /(?<!\\d)\\d{5}(?!\\d)/;\nconst last5Match = userMessage.match(last5Regex);\n// æ’é™¤ ZN ç·¨è™Ÿæœ¬èº«è¢«èª¤åˆ¤ (é›–ç„¶ ZN å¾Œé¢æ˜¯ 13 ç¢¼ï¼Œä½†ä¿éšªèµ·è¦‹)\nlet bankLast5 = last5Match ? last5Match[0] : null;\n\n// å¦‚æœæ‰¾ä¸åˆ° ZN ç·¨è™Ÿï¼Œå°±ç„¡æ³•è™•ç†\nconst isValid = !!orderId;\n\nreturn {\n  json: {\n    userMessage,\n    replyToken,\n    userId,\n    orderId,\n    bankLast5,\n    isValid\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -464,
        1376
      ],
      "id": "1ef801ab-96f8-4bbf-9efa-ac6215811c73",
      "name": "åˆ†æè¨Šæ¯å…§å®¹"
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.isValid }}",
              "value2": true
            }
          ]
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -240,
        1376
      ],
      "id": "79d5e570-4e91-4cf2-bf66-da01f3b83e0e",
      "name": "æ˜¯å¦æœ‰ ZN ç·¨è™Ÿ?"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "{ \"status\": \"ok\" }",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        -688,
        1904
      ],
      "id": "2bea39c9-67bd-4e08-b047-34fd2be9b665",
      "name": "å…ˆå›å‚³ 200 OK"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA",
          "mode": "list",
          "cachedResultName": "1220å ±ååå–®",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 396548294,
          "mode": "list",
          "cachedResultName": "å ±åè³‡æ–™",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit#gid=396548294"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "è¨‚å–®ç·¨è™Ÿ",
              "lookupValue": "={{ $json.orderId }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        112,
        1168
      ],
      "id": "e6a7e0e8-ee65-468b-a172-bb15bdbf929b",
      "name": "æœå°‹è¨‚å–®",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('åˆ†æè¨Šæ¯å…§å®¹').item.json.bankLast5 }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "æœ‰å¾Œäº”ç¢¼ (åŒ¯æ¬¾å›å ±)"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['ä»˜æ¬¾ç‹€æ…‹'] }}",
                    "rightValue": "å·²ä»˜æ¬¾",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "å·²ä»˜æ¬¾ (æŸ¥è©¢ç‹€æ…‹)"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3,
      "position": [
        -688,
        736
      ],
      "id": "6db30301-6d2a-425f-9330-2d44d4e19246",
      "name": "åˆ¤æ–·æƒ…å¢ƒ",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA",
          "mode": "list",
          "cachedResultName": "1220å ±ååå–®",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 396548294,
          "mode": "list",
          "cachedResultName": "å ±åè³‡æ–™",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit#gid=396548294"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "ä»˜æ¬¾ç‹€æ…‹": "å·²ä»˜æ¬¾(å®Œæˆ)",
            "è¨‚å–®ç·¨è™Ÿ": "={{ $('æœå°‹è¨‚å–®').item.json['è¨‚å–®ç·¨è™Ÿ'] }}",
            "å¾Œäº”ç¢¼": "={{ $json.output.bankLast5 }}",
            "ä»˜æ¬¾æ™‚é–“": "={{ $now }}"
          },
          "matchingColumns": [
            "è¨‚å–®ç·¨è™Ÿ"
          ],
          "schema": [
            {
              "id": "å ±ååºè™Ÿ",
              "displayName": "å ±ååºè™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "è¨‚å–®ç·¨è™Ÿ",
              "displayName": "è¨‚å–®ç·¨è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å ±åæ™‚é–“",
              "displayName": "å ±åæ™‚é–“",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å§“å",
              "displayName": "å§“å",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "è¯çµ¡é›»è©±",
              "displayName": "è¯çµ¡é›»è©±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "LINE ID",
              "displayName": "LINE ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å…¬å¸/å–®ä½",
              "displayName": "å…¬å¸/å–®ä½",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "è·ç¨±",
              "displayName": "è·ç¨±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å ±åèª²ç¨‹",
              "displayName": "å ±åèª²ç¨‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å ±åäººæ•¸",
              "displayName": "å ±åäººæ•¸",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ä»˜æ¬¾æ–¹å¼",
              "displayName": "ä»˜æ¬¾æ–¹å¼",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "é‡‘é¡",
              "displayName": "é‡‘é¡",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ä»˜æ¬¾ç‹€æ…‹",
              "displayName": "ä»˜æ¬¾ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "å¾Œäº”ç¢¼",
              "displayName": "å¾Œäº”ç¢¼",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ä»˜æ¬¾æ™‚é–“",
              "displayName": "ä»˜æ¬¾æ™‚é–“",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ç¶ ç•Œè¨‚å–®è™Ÿ",
              "displayName": "ç¶ ç•Œè¨‚å–®è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ç™¼ç¥¨é¡å‹",
              "displayName": "ç™¼ç¥¨é¡å‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "çµ±ä¸€ç·¨è™Ÿ",
              "displayName": "çµ±ä¸€ç·¨è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å…¬å¸æŠ¬é ­",
              "displayName": "å…¬å¸æŠ¬é ­",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ç™¼ç¥¨Email",
              "displayName": "ç™¼ç¥¨Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å‚™è¨»",
              "displayName": "å‚™è¨»",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ç¢ºèªä¿¡ç‹€æ…‹",
              "displayName": "ç¢ºèªä¿¡ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Lineé€šçŸ¥ç‹€æ…‹",
              "displayName": "Lineé€šçŸ¥ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1232,
        880
      ],
      "id": "7dfcb30c-17fc-40ee-9dc6-c79270fd1843",
      "name": "æ›´æ–°å¾Œäº”ç¢¼",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "resource": "message"
      },
      "type": "n8n-nodes-base.line",
      "typeVersion": 1,
      "position": [
        -688,
        2128
      ],
      "id": "8947a3cb-f9bf-460d-9c33-cbf3cc0eb782",
      "name": "å›è¦†ï¼šç‹€æ…‹"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA",
          "mode": "list",
          "cachedResultName": "1220å ±ååå–®",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 396548294,
          "mode": "list",
          "cachedResultName": "å ±åè³‡æ–™",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit#gid=396548294"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "ä»˜æ¬¾ç‹€æ…‹": "å·²ä»˜æ¬¾(å®Œæˆ)",
            "row_number": 0,
            "è¨‚å–®ç·¨è™Ÿ": "={{$('æœå°‹è¨‚å–®').item.è¨‚å–®ç·¨è™Ÿ}}"
          },
          "matchingColumns": [
            "è¨‚å–®ç·¨è™Ÿ"
          ],
          "schema": [
            {
              "id": "å ±ååºè™Ÿ",
              "displayName": "å ±ååºè™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "è¨‚å–®ç·¨è™Ÿ",
              "displayName": "è¨‚å–®ç·¨è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å ±åæ™‚é–“",
              "displayName": "å ±åæ™‚é–“",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å§“å",
              "displayName": "å§“å",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "è¯çµ¡é›»è©±",
              "displayName": "è¯çµ¡é›»è©±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LINE ID",
              "displayName": "LINE ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å…¬å¸/å–®ä½",
              "displayName": "å…¬å¸/å–®ä½",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "è·ç¨±",
              "displayName": "è·ç¨±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å ±åèª²ç¨‹",
              "displayName": "å ±åèª²ç¨‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å ±åäººæ•¸",
              "displayName": "å ±åäººæ•¸",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ä»˜æ¬¾æ–¹å¼",
              "displayName": "ä»˜æ¬¾æ–¹å¼",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "é‡‘é¡",
              "displayName": "é‡‘é¡",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ä»˜æ¬¾ç‹€æ…‹",
              "displayName": "ä»˜æ¬¾ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "å¾Œäº”ç¢¼",
              "displayName": "å¾Œäº”ç¢¼",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ä»˜æ¬¾æ™‚é–“",
              "displayName": "ä»˜æ¬¾æ™‚é–“",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ç¶ ç•Œè¨‚å–®è™Ÿ",
              "displayName": "ç¶ ç•Œè¨‚å–®è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ç™¼ç¥¨é¡å‹",
              "displayName": "ç™¼ç¥¨é¡å‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "çµ±ä¸€ç·¨è™Ÿ",
              "displayName": "çµ±ä¸€ç·¨è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å…¬å¸æŠ¬é ­",
              "displayName": "å…¬å¸æŠ¬é ­",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ç™¼ç¥¨Email",
              "displayName": "ç™¼ç¥¨Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å‚™è¨»",
              "displayName": "å‚™è¨»",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ç¢ºèªä¿¡ç‹€æ…‹",
              "displayName": "ç¢ºèªä¿¡ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Lineé€šçŸ¥ç‹€æ…‹",
              "displayName": "Lineé€šçŸ¥ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1232,
        1104
      ],
      "id": "51f0b6c2-1014-4fdd-a36d-57d80374c270",
      "name": "æ›´æ–°ç‹€æ…‹",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/chat/loading/start",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "loadingSeconds",
              "value": "40"
            },
            {
              "name": "chatId",
              "value": "={{ $json.body.events[0].source.userId }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -464,
        1184
      ],
      "id": "bcecd4db-5ed5-4167-be51-c09ff2563eb4",
      "name": "loading/start1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('æ¥æ”¶ Line è¨Šæ¯').item.json.body.events[0].source.userId }}",
        "contextWindowLength": 10
      },
      "id": "81c93e30-e719-420f-bf7f-ad1f3fa06f50",
      "name": "Simple Memory1",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "position": [
        112,
        1792
      ],
      "typeVersion": 1.3
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('æ¥æ”¶ Line è¨Šæ¯').item.json.body.events[0].message.text }}",
        "options": {
          "systemMessage": "=You are a n8n helpful assistant\n\n\nä½ ç¾åœ¨è¦å¹«æˆ‘å¯©æ ¸\næœƒæœ‰äººå‚³ ZN+è¨‚å–®ç·¨è™Ÿ ä»¥åŠ åŒ¯æ¬¾å¸³è™Ÿå¾Œäº”ç¢¼\n\nä½ é€™æ¢è·¯æ˜¯ éç›¸é—œè³‡è¨Š éš¨è‘—{{ $('æ¥æ”¶ Line è¨Šæ¯').item.json.body.events[0].message.text }} å›æ‡‰å³å¯\n\nå¾ˆç­è§£ n8n æ•´å€‹é‹ä½œæµç¨‹\néƒ¨å±¬åœ¨ Zeabur \nç¾åœ¨æœ‰ line message æ–°çš„ç¤¾ç¾¤ç¯€é»\nn8n è¦æº–å‚™å‡ç´š 2.0 \n\nä½ æ˜¯ å°ˆå®¶ç´šçš„ n8n é«˜æ‰‹ å°ˆé–€å›æ‡‰ n8n ç›¸é—œå•é¡Œ\n\nå¦‚æœæœ‰é‡åˆ°ä¸ç¢ºå®šçš„ è«‹ä½¿ç”¨ \nToolï¼š perplexity"
        }
      },
      "id": "746c2fab-4a90-4929-bf0a-3e8c76147b5d",
      "name": "AI Agent1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        48,
        1568
      ],
      "typeVersion": 1.8,
      "alwaysOutputData": false,
      "retryOnFail": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -16,
        1792
      ],
      "id": "4593efb8-60a6-4ba7-829f-8d50cd72ced7",
      "name": "OpenRouter Chat Model1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "send",
        "to": "={{ $json.body.events[0].source.userId }}",
        "messages": {
          "values": [
            {
              "text": "={{ $json.output }}"
            }
          ]
        }
      },
      "type": "@aotoki/n8n-nodes-line-messaging.lineMessaging",
      "typeVersion": 1,
      "position": [
        720,
        1568
      ],
      "id": "21c9aad6-a8ef-494a-b555-fe6f197cdcb9",
      "name": "Line Messaging",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "send",
        "to": "={{ $('æ¥æ”¶ Line è¨Šæ¯').item.json.body.events[0].source.userId }}",
        "messages": {
          "values": [
            {
              "text": "={{ $json.output }}"
            }
          ]
        }
      },
      "type": "@aotoki/n8n-nodes-line-messaging.lineMessaging",
      "typeVersion": 1,
      "position": [
        1888,
        1152
      ],
      "id": "515aa040-a88f-475d-a9e1-d19f4c5e5fc9",
      "name": "Line Messaging1",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=è¨‚å–®ç·¨è™Ÿï¼š{{ $json['è¨‚å–®ç·¨è™Ÿ'] }}  å·²ç¶“æ”¶åˆ°å¾Œäº”ç¢¼ {{ $json['å¾Œäº”ç¢¼'] }}",
        "options": {
          "systemMessage": "ä½ è¦å¹«å¿™å¯©æ ¸è¨‚å–® æ˜¯å¦å·²ç¶“æ”¶åˆ°å¾Œäº”ç¢¼ \n\næœ‰çš„è©±å°±å›å‚³ ok ä¸¦æœƒå¯„é€šçŸ¥ä¿¡"
        }
      },
      "id": "4e99a89f-4603-4cc0-ad78-a98671e9220c",
      "name": "AI Agent2",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1456,
        1008
      ],
      "typeVersion": 1.8
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1440,
        1280
      ],
      "id": "ce86fa19-a60c-4aeb-9485-cc118956d186",
      "name": "OpenRouter Chat Model2",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('åˆ†æè¨Šæ¯å…§å®¹').item.json.userMessage }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ä½ æ˜¯ ZN Studio çš„å ±åå°å¹«æ‰‹ã€‚ä½ çš„ä»»å‹™æ˜¯å¾ä½¿ç”¨è€…çš„è¨Šæ¯ä¸­æå–ã€Œè¨‚å–®ç·¨è™Ÿ(ZNé–‹é ­)ã€å’Œã€ŒåŒ¯æ¬¾å¾Œäº”ç¢¼ã€ã€‚\n\næŸ¥è©¢æ˜¯å¦å·²æˆåŠŸåŒ¯æ¬¾ (æœ‰æˆåŠŸ å°±æœ‰å¾Œäº”ç¢¼)\næ²’æœ‰æˆåŠŸ è«‹å›å¾© è«‹ç¢ºèªåŒ¯æ¬¾å¾Œäº”ç¢¼å¾Œ ä¸¦æä¾› \n\nä½ æœ‰ Tool sheet ï¼šGet row(s) in sheet in Google Sheets\nå¯ä»¥æŸ¥è©¢\n\n\nè¦å‰‡ï¼š\n\nè¨‚å–®ç·¨è™Ÿï¼šé€šå¸¸æ˜¯ ZN é–‹é ­æ¥ 13 ä½æ•¸å­—ã€‚\n\nå¾Œäº”ç¢¼ï¼šé€šå¸¸æ˜¯ 5 ä½ç´”æ•¸å­—ã€‚\n\nåˆ¤æ–·æ„åœ– (intent)ï¼š\n\nå¦‚æœæœ‰ã€Œè¨‚å–®ç·¨è™Ÿã€ä¸”æœ‰ã€Œå¾Œäº”ç¢¼ã€ -> å›å‚³ report_payment\n\nå¦‚æœåªæœ‰ã€Œè¨‚å–®ç·¨è™Ÿã€ -> å›å‚³ check_status\n\nå…¶ä»– -> å›å‚³ unknown\n\nè¼¸å‡ºæ ¼å¼ï¼ˆå¿…é ˆæ˜¯ç´” JSONï¼‰ï¼š { \"intent\": \"report_payment\", \"orderId\": \"ZN17...\", \"bankLast5\": \"12345\", \"reply\": \"ç°¡çŸ­çš„å›è¦†æ–‡å­—\" }"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        576,
        960
      ],
      "id": "4cf1207d-8f0b-4349-9385-76eee27c65bf",
      "name": "AI Agent3"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        448,
        1184
      ],
      "id": "9be80bb1-b21d-4d06-a4c1-877c3a5f6891",
      "name": "OpenRouter Chat Model3",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('æ¥æ”¶ Line è¨Šæ¯').item.json.body.events[0].source.userId }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        576,
        1184
      ],
      "id": "2c4cce33-3955-4b79-a8d5-08ac0ab70441",
      "name": "Simple Memory2"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
      "typeVersion": 1,
      "position": [
        832,
        1184
      ],
      "id": "dbd0c420-aa7e-457c-a4b4-e258748e6aad",
      "name": "Auto-fixing Output Parser"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{ \"intent\": \"report_payment\", \"orderId\": \"ZN17...\", \"bankLast5\": \"12345\", \"reply\": \"ç°¡çŸ­çš„å›è¦†æ–‡å­—\" }"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        976,
        1392
      ],
      "id": "7d608b90-24f9-4d78-bd28-86c04d0d4cd8",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        848,
        1392
      ],
      "id": "608d0784-d353-4bb4-a1ee-98466a4ed5cd",
      "name": "Google Gemini Chat Model",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA",
          "mode": "list",
          "cachedResultName": "1220å ±ååå–®",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 396548294,
          "mode": "list",
          "cachedResultName": "å ±åè³‡æ–™",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit#gid=396548294"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "è¨‚å–®ç·¨è™Ÿ",
              "lookupValue": "={{ $('æœå°‹è¨‚å–®').item.json[\"è¨‚å–®ç·¨è™Ÿ\"] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        704,
        1184
      ],
      "id": "67963a4a-0a12-4411-8bf2-6d00a13fc96b",
      "name": "Get row(s) in sheet in Google Sheets",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "messages": {
          "message": [
            {
              "content": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message0_Text', ``, 'string') }}"
            }
          ]
        },
        "options": {},
        "requestOptions": {}
      },
      "type": "n8n-nodes-base.perplexityTool",
      "typeVersion": 1,
      "position": [
        240,
        1792
      ],
      "id": "3e81c358-0ac1-44f6-9bd8-d20e4fcc5511",
      "name": "Message a model in Perplexity",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "sendTo": "={{ $('æœå°‹è¨‚å–®').item.json.Email }}",
        "subject": "=ğŸ‰ã€å ±åæˆåŠŸã€‘ZN Studio n8n å¯¦ä½œèª² - è¨‚å–®ç¢ºèªé€šçŸ¥ ({{ $('æœå°‹è¨‚å–®').item.json['è¨‚å–®ç·¨è™Ÿ'] }})",
        "message": "=<div style=\"font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; color: #333; line-height: 1.6;\">\n  \n  <h2 style=\"color: #0ea5a4; border-bottom: 2px solid #0ea5a4; padding-bottom: 10px;\">ğŸ‰ å ±åæˆåŠŸç¢ºèª</h2>\n  \n  <p>Hi <strong>{{ $('æœå°‹è¨‚å–®').item.json['å§“å'] }}</strong> æ‚¨å¥½ï¼Œ</p>\n  \n  <p>æ­å–œæ‚¨ï¼æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„åŒ¯æ¬¾ï¼Œæ‚¨çš„å ±åå·²æ­£å¼ç¢ºèªã€‚<br>\n  éå¸¸æœŸå¾…åœ¨ 12/20 èˆ‡æ‚¨è¦‹é¢ï¼Œå¸¶æ‚¨ä¸€èµ·ç”¨æ„æƒ³ä¸åˆ°çš„è§’åº¦ç©è½‰ n8nï¼</p>\n\n  <div style=\"background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0;\">\n    <h3 style=\"margin-top: 0; color: #2c3e50;\">ğŸ“¦ è¨‚å–®è³‡è¨Š</h3>\n    <p style=\"margin: 5px 0;\"><strong>è¨‚å–®ç·¨è™Ÿï¼š</strong>{{ $('æœå°‹è¨‚å–®').item.json['è¨‚å–®ç·¨è™Ÿ'] }}</p>\n    <p style=\"margin: 5px 0;\"><strong>ä»˜æ¬¾é‡‘é¡ï¼š</strong>NT$ {{ $('æœå°‹è¨‚å–®').item.json['é‡‘é¡'] }}</p>\n    <p style=\"margin: 5px 0;\"><strong>ä»˜æ¬¾æ–¹å¼ï¼š</strong>åŒ¯æ¬¾ (å·²ä»˜æ¬¾)</p>\n  </div>\n\n  <div style=\"background-color: #e6fffa; padding: 15px; border-radius: 8px; border: 1px solid #b2f5ea; margin: 20px 0;\">\n    <h3 style=\"margin-top: 0; color: #0ea5a4;\">ğŸ æ—©é³¥å°ˆå±¬ç¦åˆ©</h3>\n    <p>æ­¡è¿åŠ å…¥æˆ‘å€‘çš„ VIP å­¸å“¡ç¾¤çµ„ï¼<br>\n    èª²å‰äº¤æµã€èª²å¾Œæå•éƒ½åœ¨é€™è£¡ï¼š</p>\n    <p style=\"text-align: center; margin-top: 15px;\">\n      <a href=\"https://line.me/ti/g/Smb6JaL93f\" style=\"background-color: #0ea5a4; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; font-weight: bold; display: inline-block;\">ğŸ‘‰ é»æ­¤åŠ å…¥ VIP Line ç¾¤çµ„</a>\n    </p>\n  </div>\n\n  <div style=\"margin: 20px 0;\">\n    <h3 style=\"color: #2c3e50;\">ğŸ“… ä¸Šèª²è³‡è¨Š</h3>\n    <ul style=\"list-style-type: none; padding: 0;\">\n      <li style=\"margin-bottom: 8px;\">ğŸ•’ <strong>æ™‚é–“ï¼š</strong>2025/12/20 (å…­) 13:00 - 17:00</li>\n      <li style=\"margin-bottom: 8px;\">ğŸ“ <strong>åœ°é»ï¼š</strong>å°åŒ—å¸‚ä¸­æ­£å€è¨±æ˜Œè¡— 42 ä¹‹ 1 è™Ÿ 4 æ¨“ D æ•™å®¤</li>\n      <li style=\"margin-bottom: 8px;\">ğŸ’» <strong>æº–å‚™ï¼š</strong>è«‹å‹™å¿…æ”œå¸¶ç­†è¨˜å‹é›»è…¦ (Windows/Mac çš†å¯)</li>\n    </ul>\n  </div>\n\n  <hr style=\"border: none; border-top: 1px solid #eee; margin: 30px 0;\">\n  \n  <p style=\"font-size: 14px; color: #666;\">\n    è‹¥æœ‰ä»»ä½•å•é¡Œï¼Œæ­¡è¿ç›´æ¥å›è¦†æ­¤ä¿¡ï¼Œæˆ–æ˜¯é€é Line å®˜æ–¹å¸³è™Ÿè¯ç¹«æˆ‘å€‘ã€‚<br>\n    Line OAï¼š<a href=\"https://lin.ee/Faz0doj\" style=\"color: #0ea5a4;\">https://lin.ee/Faz0doj</a>\n  </p>\n  \n  <p style=\"margin-top: 20px;\"><strong>ZN Studio | Nick Chang æ•¬ä¸Š</strong></p>\n</div>",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        1888,
        864
      ],
      "id": "57e46a5d-f508-43d9-bdb0-4c126eec44c4",
      "name": "ç¢ºèªæ”¶åˆ°æ¬¾é …",
      "webhookId": "[REMOVED]",
      "credentials": "[REMOVED]"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA",
          "mode": "list",
          "cachedResultName": "1220å ±ååå–®",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 396548294,
          "mode": "list",
          "cachedResultName": "å ±åè³‡æ–™",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1LCnrVvjCfGvZ7EcKUuSuRfINFuCc343IZi8c7TEStvA/edit#gid=396548294"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 0,
            "è¨‚å–®ç·¨è™Ÿ": "={{ $('æ›´æ–°å¾Œäº”ç¢¼').item.json['è¨‚å–®ç·¨è™Ÿ'] }}",
            "Status": "å·²æ”¶åˆ°æ¬¾é …"
          },
          "matchingColumns": [
            "è¨‚å–®ç·¨è™Ÿ"
          ],
          "schema": [
            {
              "id": "å ±ååºè™Ÿ",
              "displayName": "å ±ååºè™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "è¨‚å–®ç·¨è™Ÿ",
              "displayName": "è¨‚å–®ç·¨è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "å ±åæ™‚é–“",
              "displayName": "å ±åæ™‚é–“",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å§“å",
              "displayName": "å§“å",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "è¯çµ¡é›»è©±",
              "displayName": "è¯çµ¡é›»è©±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "LINE ID",
              "displayName": "LINE ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å…¬å¸/å–®ä½",
              "displayName": "å…¬å¸/å–®ä½",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "è·ç¨±",
              "displayName": "è·ç¨±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å ±åèª²ç¨‹",
              "displayName": "å ±åèª²ç¨‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å ±åäººæ•¸",
              "displayName": "å ±åäººæ•¸",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ä»˜æ¬¾æ–¹å¼",
              "displayName": "ä»˜æ¬¾æ–¹å¼",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "é‡‘é¡",
              "displayName": "é‡‘é¡",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ä»˜æ¬¾ç‹€æ…‹",
              "displayName": "ä»˜æ¬¾ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å¾Œäº”ç¢¼",
              "displayName": "å¾Œäº”ç¢¼",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ä»˜æ¬¾æ™‚é–“",
              "displayName": "ä»˜æ¬¾æ™‚é–“",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ç¶ ç•Œè¨‚å–®è™Ÿ",
              "displayName": "ç¶ ç•Œè¨‚å–®è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ç™¼ç¥¨é¡å‹",
              "displayName": "ç™¼ç¥¨é¡å‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "çµ±ä¸€ç·¨è™Ÿ",
              "displayName": "çµ±ä¸€ç·¨è™Ÿ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å…¬å¸æŠ¬é ­",
              "displayName": "å…¬å¸æŠ¬é ­",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ç™¼ç¥¨Email",
              "displayName": "ç™¼ç¥¨Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "å‚™è¨»",
              "displayName": "å‚™è¨»",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ç¢ºèªä¿¡ç‹€æ…‹",
              "displayName": "ç¢ºèªä¿¡ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Lineé€šçŸ¥ç‹€æ…‹",
              "displayName": "Lineé€šçŸ¥ç‹€æ…‹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        2176,
        1152
      ],
      "id": "9faf5000-3231-4c8d-b00b-80adc30b5714",
      "name": "æ›´æ–°ç‹€æ…‹1",
      "credentials": "[REMOVED]"
    }
  ],
  "connections": {
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          },
          {
            "node": "loading/start",
            "type": "main",
            "index": 0
          },
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "å›è¦† Line è¨Šæ¯é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "loading/start": {
      "main": [
        []
      ]
    },
    "æ¥æ”¶ Line è¨Šæ¯": {
      "main": [
        [
          {
            "node": "åˆ†æè¨Šæ¯å…§å®¹",
            "type": "main",
            "index": 0
          },
          {
            "node": "loading/start1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ†æè¨Šæ¯å…§å®¹": {
      "main": [
        [
          {
            "node": "æ˜¯å¦æœ‰ ZN ç·¨è™Ÿ?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ˜¯å¦æœ‰ ZN ç·¨è™Ÿ?": {
      "main": [
        [
          {
            "node": "æœå°‹è¨‚å–®",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æœå°‹è¨‚å–®": {
      "main": [
        [
          {
            "node": "AI Agent3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ¤æ–·æƒ…å¢ƒ": {
      "main": [
        [],
        []
      ]
    },
    "æ›´æ–°å¾Œäº”ç¢¼": {
      "main": [
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory1": {
      "ai_memory": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Line Messaging",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ›´æ–°ç‹€æ…‹": {
      "main": [
        []
      ]
    },
    "AI Agent2": {
      "main": [
        [
          {
            "node": "Line Messaging1",
            "type": "main",
            "index": 0
          },
          {
            "node": "ç¢ºèªæ”¶åˆ°æ¬¾é …",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory2": {
      "ai_memory": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent3": {
      "main": [
        [
          {
            "node": "æ›´æ–°å¾Œäº”ç¢¼",
            "type": "main",
            "index": 0
          },
          {
            "node": "æ›´æ–°ç‹€æ…‹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Auto-fixing Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Auto-fixing Output Parser",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Auto-fixing Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet in Google Sheets": {
      "ai_tool": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Message a model in Perplexity": {
      "ai_tool": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Line Messaging1": {
      "main": [
        [
          {
            "node": "æ›´æ–°ç‹€æ…‹1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "æ¥æ”¶ Line è¨Šæ¯": [
      {
        "json": {
          "headers": {
            "host": "nickleo9.zeabur.app",
            "user-agent": "LineBotWebhook/2.0",
            "content-length": "816",
            "content-type": "application/json; charset=utf-8",
            "x-forwarded-for": "147.92.149.166, 147.92.149.166",
            "x-forwarded-host": "nickleo9.zeabur.app",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-line-signature": "BEOgFhcdF/YT6odrDx/AV2u0TUXgJDwPwwhaTPnbCXI=",
            "x-real-ip": "147.92.149.166",
            "x-zeabur-container-port": "5678",
            "x-zeabur-ip-country": "JP",
            "x-zeabur-request-id": "hnd1::b7c7e472-134e-42e3-abb9-71668f2fba22",
            "accept-encoding": "gzip"
          },
          "params": {},
          "query": {},
          "body": {
            "destination": "Uf0111e880fc52d0c559634d2e4012ff7",
            "events": [
              {
                "type": "message",
                "message": {
                  "type": "image",
                  "id": "591999137231405833",
                  "quoteToken": "x3p10vfG-4_EIDAdymBCbhw_D2_FXwjc8VF2hkYa0TYVh6UFOXWLBV2jTzomNYmQUWpAh293Arl2UbqUq8AqWDl5_VtqsT93ajFpHnghPnhapqNOBji6RyCVtyrDuyo7JiqF8OIGeyICd7AZmGfHOg",
                  "markAsReadToken": "aAPVHD-Zn6zDU7B990F_d2k6uRdqblMWam_vJbB8ZaJ_574juJjE6aY30__E7GraTmmJqJhcRBZ3HYecB56ZL8anI9UpjEnZAleYXFJXncGObB6_K-UjSyOfpzCfg7gC3rBLLvapZY-XXZ1ywAN-U3P-2cvwEbErIseO3wZNGkFu85Pv5RDWzi6BAtlG4XMlvr7XtWdrWgFScrouQMND-w",
                  "contentProvider": {
                    "type": "line"
                  }
                },
                "webhookEventId": "01KCDNF988VYCJMV2CQ4CPHYTQ",
                "deliveryContext": {
                  "isRedelivery": false
                },
                "timestamp": 1765690287133,
                "source": {
                  "type": "user",
                  "userId": "U5d10cd952818cc961ce44e88aec3e5dc"
                },
                "replyToken": "018de8d8fa344e1d88207cd688b3cdb5",
                "mode": "active"
              }
            ]
          },
          "webhookUrl": "https://nickleo9.zeabur.app/webhook/n8n-CRM",
          "executionMode": "production"
        }
      }
    ]
  },
  "versionId": "a8a9e7d4-8874-40fa-9577-bcdb7d8633ca",
  "triggerCount": 1,
  "shared": [
    {
      "updatedAt": "2025-05-06T16:45:09.836Z",
      "createdAt": "2025-05-06T16:45:09.836Z",
      "role": "workflow:owner",
      "workflowId": "AoYTHhbcInrgNN0M",
      "projectId": "4W71QCd0cKKsiKSS"
    }
  ],
  "tags": []
}